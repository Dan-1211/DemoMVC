    <!-- Bootstrap 5 CSS -->
         <!-- Bootstrap 5 CSS -->
              <!-- Bootstrap 5 CSS -->
                   <!-- Bootstrap 5 CSS -->
                        <!-- Bootstrap 5 CSS -->
                             <!-- Bootstrap 5 CSS -->
                                  <!-- Bootstrap 5 CSS -->
                                       <!-- Bootstrap 5 CSS -->
                                        
<!DOCTYPE html>
<html lang="vi" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω T√†i Kho·∫£n - C·ª≠a H√†ng M·ªπ Ph·∫©m</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="quanlitaikhoan.css">
</head>
<body>
    <!-- Animated Background Effects -->
    <div class="animated-background">
        <!-- Aurora Effect -->
        <div class="aurora"></div>
        
        <!-- Organic Nature Patterns -->
        <div class="organic-pattern"></div>
        <div class="organic-pattern"></div>
        <div class="organic-pattern"></div>
        
        <!-- Floating Leaves -->
        <div class="leaf maple" style="left: 5%; animation-delay: 0s;">üçÅ</div>
        <div class="leaf oak" style="left: 15%; animation-delay: -3s;">üçÉ</div>
        <div class="leaf birch" style="left: 25%; animation-delay: -6s;">üåø</div>
        <div class="leaf maple" style="left: 35%; animation-delay: -9s;">üçÇ</div>
        <div class="leaf small" style="left: 45%; animation-delay: -12s;">üå±</div>
        <div class="leaf oak" style="left: 55%; animation-delay: -2s;">üçÉ</div>
        <div class="leaf birch" style="left: 65%; animation-delay: -5s;">üåø</div>
        <div class="leaf maple" style="left: 75%; animation-delay: -8s;">üçÅ</div>
        <div class="leaf small" style="left: 85%; animation-delay: -11s;">üå±</div>
        <div class="leaf oak" style="left: 95%; animation-delay: -14s;">üçÉ</div>
        
        <!-- Floating Flower Petals -->
        <div class="flower-petal sakura" style="left: 8%; animation-delay: -1s;">üå∏</div>
        <div class="flower-petal rose" style="left: 18%; animation-delay: -4s;">üåπ</div>
        <div class="flower-petal daisy" style="left: 28%; animation-delay: -7s;">üåº</div>
        <div class="flower-petal lavender" style="left: 38%; animation-delay: -10s;">üíú</div>
        <div class="flower-petal sakura" style="left: 48%; animation-delay: -13s;">üå∏</div>
        <div class="flower-petal rose" style="left: 58%; animation-delay: -2.5s;">üå∫</div>
        <div class="flower-petal daisy" style="left: 68%; animation-delay: -5.5s;">üåº</div>
        <div class="flower-petal lavender" style="left: 78%; animation-delay: -8.5s;">üåª</div>
        <div class="flower-petal sakura" style="left: 88%; animation-delay: -11.5s;">üå∏</div>
        
        <!-- Nature Elements -->
        <div class="nature-element branch" style="left: 12%; animation-delay: -3s;">üå≥</div>
        <div class="nature-element grass" style="left: 32%; animation-delay: -8s;">üåæ</div>
        <div class="nature-element seed" style="left: 52%; animation-delay: -13s;">üå∞</div>
        <div class="nature-element branch" style="left: 72%; animation-delay: -5s;">üå≤</div>
        <div class="nature-element grass" style="left: 92%; animation-delay: -10s;">üåæ</div>
        
        <!-- Floating Bubbles -->
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        
        <!-- Ripple Effects -->
        <div class="ripple"></div>
        <div class="ripple"></div>
        <div class="ripple"></div>
        
        <!-- Floating Nature & Cosmetic Icons -->
        <div class="floating-icons"><i class="bi bi-droplet-fill"></i></div>
        <div class="floating-icons"><i class="bi bi-flower1"></i></div>
        <div class="floating-icons"><i class="bi bi-tree"></i></div>
        <div class="floating-icons"><i class="bi bi-sun"></i></div>
        <div class="floating-icons"><i class="bi bi-cloud"></i></div>
        <div class="floating-icons"><i class="bi bi-droplet"></i></div>
        <div class="floating-icons"><i class="bi bi-flower2"></i></div>
        <div class="floating-icons"><i class="bi bi-brightness-high"></i></div>
        <div class="floating-icons"><i class="bi bi-egg"></i></div>
        <div class="floating-icons"><i class="bi bi-flower3"></i></div>
        <div class="floating-icons"><i class="bi bi-water"></i></div>
        <div class="floating-icons"><i class="bi bi-tree-fill"></i></div>
        <div class="floating-icons">üíÑ</div>
        <div class="floating-icons">üíÖ</div>
        <div class="floating-icons">‚ú®</div>
        <div class="floating-icons">üå∏</div>
        <div class="floating-icons">üå∫</div>
        <div class="floating-icons">ü¶ã</div>
        
        <!-- Geometric Shapes -->
        <div class="geo-shape circle" style="top: 15%; left: 5%; animation-delay: 0s;"></div>
        <div class="geo-shape triangle" style="top: 30%; left: 85%; animation-delay: -1s;"></div>
        <div class="geo-shape square" style="top: 50%; left: 10%; animation-delay: -2s;"></div>
        <div class="geo-shape diamond" style="top: 70%; left: 75%; animation-delay: -3s;"></div>
        <div class="geo-shape circle" style="top: 80%; left: 30%; animation-delay: -4s;"></div>
        <div class="geo-shape triangle" style="top: 25%; left: 60%; animation-delay: -5s;"></div>
        <div class="geo-shape square" style="top: 65%; left: 90%; animation-delay: -6s;"></div>
        <div class="geo-shape diamond" style="top: 45%; left: 40%; animation-delay: -7s;"></div>
        
        <!-- Sparkles -->
        <div class="sparkle" style="top: 20%; left: 25%; animation-delay: 0s;"></div>
        <div class="sparkle" style="top: 40%; left: 70%; animation-delay: -0.5s;"></div>
        <div class="sparkle" style="top: 60%; left: 15%; animation-delay: -1s;"></div>
        <div class="sparkle" style="top: 75%; left: 80%; animation-delay: -1.5s;"></div>
        <div class="sparkle" style="top: 35%; left: 50%; animation-delay: -2s;"></div>
        <div class="sparkle" style="top: 85%; left: 60%; animation-delay: -2.5s;"></div>
        <div class="sparkle" style="top: 10%; left: 90%; animation-delay: -3s;"></div>
        <div class="sparkle" style="top: 55%; left: 35%; animation-delay: -3.5s;"></div>
        <div class="sparkle" style="top: 90%; left: 20%; animation-delay: -4s;"></div>
        <div class="sparkle" style="top: 25%; left: 85%; animation-delay: -4.5s;"></div>
        
        <!-- Floating Particles -->
        <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
        <div class="particle" style="left: 20%; animation-delay: -1s;"></div>
        <div class="particle" style="left: 30%; animation-delay: -2s;"></div>
        <div class="particle" style="left: 40%; animation-delay: -3s;"></div>
        <div class="particle" style="left: 50%; animation-delay: -4s;"></div>
        <div class="particle" style="left: 60%; animation-delay: -5s;"></div>
        <div class="particle" style="left: 70%; animation-delay: -6s;"></div>
        <div class="particle" style="left: 80%; animation-delay: -7s;"></div>
        <div class="particle" style="left: 90%; animation-delay: -8s;"></div>
        
        <!-- Wave Animation -->
        <div class="wave-container">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
    </div>

    <!-- Theme Toggle Button -->
    <button class="btn btn-primary btn-theme-toggle" id="themeToggle" title="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô s√°ng/t·ªëi" 
            style="position: fixed !important; bottom: 20px !important; right: 20px !important; z-index: 99999 !important; border-radius: 50% !important; width: 60px !important; height: 60px !important; padding: 0 !important; box-shadow: 0 6px 20px rgba(0,0,0,0.15) !important; margin: 0 !important; transform: none !important; transition: all 0.3s ease !important; display: flex !important; align-items: center !important; justify-content: center !important;">
        <i class="bi bi-sun-fill text-white" id="themeIcon" style="font-size: 1.5rem;"></i>
    </button>

    <!-- Avatar Crop Modal -->
    <div class="modal fade" id="cropModal" tabindex="-1" aria-labelledby="cropModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cropModalLabel">
                        <i class="bi bi-crop me-2"></i>C·∫Øt ·∫£nh ƒë·∫°i di·ªán
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <p class="text-muted mb-3">K√©o ƒë·ªÉ di chuy·ªÉn v√† thu ph√≥ng ·∫£nh. V√πng ƒë∆∞·ª£c ch·ªçn s·∫Ω l√† ·∫£nh ƒë·∫°i di·ªán c·ªßa b·∫°n.</p>
                    <div class="crop-container" style="max-width: 350px; margin: 0 auto;">
                        <canvas id="cropCanvas" width="300" height="300" 
                                style="border: 2px solid var(--nature-green-soft); border-radius: 15px; cursor: move; max-width: 100%; transition: all 0.2s ease;"></canvas>
                    </div>
                    <div class="mt-3">
                        <label for="zoomSlider" class="form-label">
                            <i class="bi bi-zoom-in me-1"></i>Thu ph√≥ng
                        </label>
                        <input type="range" class="form-range" id="zoomSlider" min="0.5" max="3" step="0.05" value="1" 
                               style="accent-color: var(--nature-green-accent);">
                    </div>
                    <div class="mt-2">
                        <button class="btn btn-outline-secondary btn-sm" id="resetCrop">
                            <i class="bi bi-arrow-counterclockwise me-1"></i>ƒê·∫∑t l·∫°i
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle me-1"></i>H·ªßy
                    </button>
                    <button type="button" class="btn btn-primary" id="applyCrop">
                        <i class="bi bi-check-circle me-1"></i>√Åp d·ª•ng
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Address Modal -->
    <div class="modal fade" id="addressModal" tabindex="-1" aria-labelledby="addressModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addressModalLabel">
                        <i class="bi bi-geo-alt me-2"></i>Th√™m ƒê·ªãa Ch·ªâ M·ªõi
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addressForm">
                        <input type="hidden" id="addressId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="recipientName" class="form-label">
                                    <i class="bi bi-person me-1"></i>H·ªç v√† t√™n ng∆∞·ªùi nh·∫≠n *
                                </label>
                                <input type="text" class="form-control" id="recipientName" name="recipientName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">
                                    <i class="bi bi-telephone me-1"></i>S·ªë ƒëi·ªán tho·∫°i *
                                </label>
                                <input type="tel" class="form-control" id="phone" name="phone" required 
                                       placeholder="Nh·∫≠p 10 s·ªë ƒëi·ªán tho·∫°i (VD: 0987654321)"
                                       pattern="[0-9]{10,11}"
                                       maxlength="11"
                                       title="S·ªë ƒëi·ªán tho·∫°i ph·∫£i c√≥ 10-11 ch·ªØ s·ªë">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="province" class="form-label">
                                    <i class="bi bi-building me-1"></i>T·ªânh/Th√†nh ph·ªë *
                                </label>
                                <div class="autocomplete-container">
                                    <input type="text" class="form-control province-input" id="province" name="province" required 
                                           placeholder="Nh·∫≠p t√™n t·ªânh/th√†nh ph·ªë..." autocomplete="off">
                                    <div class="autocomplete-dropdown" id="provinceDropdown"></div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="district" class="form-label">
                                    <i class="bi bi-signpost me-1"></i>Qu·∫≠n/Huy·ªán *
                                </label>
                                <div class="autocomplete-container">
                                    <input type="text" class="form-control district-input" id="district" name="district" required 
                                           placeholder="Nh·∫≠p t√™n qu·∫≠n/huy·ªán..." autocomplete="off" disabled>
                                    <div class="autocomplete-dropdown" id="districtDropdown"></div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="ward" class="form-label">
                                    <i class="bi bi-geo me-1"></i>Ph∆∞·ªùng/X√£ *
                                </label>
                                <div class="autocomplete-container">
                                    <input type="text" class="form-control ward-input" id="ward" name="ward" required 
                                           placeholder="Nh·∫≠p t√™n ph∆∞·ªùng/x√£..." autocomplete="off" disabled>
                                    <div class="autocomplete-dropdown" id="wardDropdown"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="detailAddress" class="form-label">
                                <i class="bi bi-house me-1"></i>ƒê·ªãa ch·ªâ chi ti·∫øt *
                            </label>
                            <textarea class="form-control" id="detailAddress" name="detailAddress" rows="3" required 
                                      placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ chi ti·∫øt (√≠t nh·∫•t 5 k√Ω t·ª±). V√≠ d·ª•: 123 L√™ L·ª£i, Qu·∫≠n 1"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="addressType" class="form-label">
                                <i class="bi bi-tag me-1"></i>Lo·∫°i ƒë·ªãa ch·ªâ
                            </label>
                            <select class="form-select" id="addressType" name="addressType">
                                <option value="home">Nh√† ri√™ng</option>
                                <option value="office">VƒÉn ph√≤ng</option>
                                <option value="other">Kh√°c</option>
                            </select>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="isDefault" name="isDefault">
                            <label class="form-check-label" for="isDefault">
                                <i class="bi bi-star me-1"></i>ƒê·∫∑t l√†m ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle me-1"></i>H·ªßy
                    </button>
                    <button type="button" class="btn btn-primary" onclick="console.log('Button clicked!'); saveAddress();">
                        <i class="bi bi-check-circle me-1"></i>L∆∞u ƒê·ªãa Ch·ªâ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Section -->
    <div id="loginSection" class="form-section active">
        <div class="login-container">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="card">
                            <div class="card-body p-4">
                                <div class="text-center mb-4">
                                    <h2 class="card-title">ƒêƒÉng Nh·∫≠p</h2>
                                    <p class="text-muted">Vui l√≤ng ƒëƒÉng nh·∫≠p v√†o t√†i kho·∫£n c·ªßa b·∫°n</p>
                                </div>
                                <form id="loginForm">
                                    <div class="mb-3">
                                        <label for="loginUsername" class="form-label">Email ho·∫∑c T√™n ƒëƒÉng nh·∫≠p</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-person"></i></span>
                                            <input type="text" class="form-control" id="loginUsername" required>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="loginPassword" class="form-label">M·∫≠t kh·∫©u</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-lock"></i></span>
                                            <input type="password" class="form-control" id="loginPassword" required>
                                            <button class="btn btn-outline-secondary" type="button" id="toggleLoginPassword">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="rememberMe">
                                        <label class="form-check-label" for="rememberMe">Ghi nh·ªõ ƒëƒÉng nh·∫≠p</label>
                                    </div>
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary" onclick="handleLogin(event)">ƒêƒÉng Nh·∫≠p</button>
                                    </div>
                                </form>
                                <div class="text-center mt-3">
                                    <a href="#" class="text-decoration-none" onclick="showSection('forgotPasswordSection')">Qu√™n m·∫≠t kh·∫©u?</a>
                                </div>
                                <div class="text-center mt-2">
                                    <span class="text-muted">Ch∆∞a c√≥ t√†i kho·∫£n? </span>
                                    <a href="#" class="text-decoration-none" onclick="showSection('registerSection')">ƒêƒÉng k√Ω ngay</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Register Section -->
    <div id="registerSection" class="form-section">
        <div class="login-container">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-5 col-lg-4">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="text-center mb-2">
                                    <h5 class="card-title mb-1">ƒêƒÉng K√Ω T√†i Kho·∫£n</h5>
                                    <small class="text-muted">T·∫°o t√†i kho·∫£n m·ªõi</small>
                                </div>
                                <form id="registerForm">
                                    <div class="mb-2">
                                        <label for="registerName" class="form-label">H·ªç v√† t√™n</label>
                                        <input type="text" class="form-control" id="registerName" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="registerEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="registerEmail" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="registerUsername" class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                                        <input type="text" class="form-control" id="registerUsername" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="registerPassword" class="form-label">M·∫≠t kh·∫©u</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="registerPassword" required>
                                            <button class="btn btn-outline-secondary" type="button" id="toggleRegisterPassword">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                        </div>
                                        <div class="strength-meter mt-1">
                                            <div class="strength-bar" id="strengthBar"></div>
                                        </div>
                                        <small class="text-muted" id="strengthText">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh</small>
                                    </div>
                                    <div class="mb-2">
                                        <label for="confirmPassword" class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                                        <input type="password" class="form-control" id="confirmPassword" required>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="agreeTerms" required>
                                        <label class="form-check-label" for="agreeTerms">
                                            T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" class="text-decoration-none">ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                                        </label>
                                    </div>
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary">ƒêƒÉng K√Ω</button>
                                    </div>
                                </form>
                                <div class="text-center mt-2">
                                    <span class="text-muted">ƒê√£ c√≥ t√†i kho·∫£n? </span>
                                    <a href="#" class="text-decoration-none" onclick="showSection('loginSection')">ƒêƒÉng nh·∫≠p</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Section -->
    <div id="forgotPasswordSection" class="form-section">
        <div class="login-container">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="card">
                            <div class="card-body p-4">
                                <div class="text-center mb-4">
                                    <h2 class="card-title">Qu√™n M·∫≠t Kh·∫©u</h2>
                                    <p class="text-muted">Nh·∫≠p email ƒë·ªÉ ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u</p>
                                </div>
                                <form id="forgotPasswordForm">
                                    <div class="mb-3">
                                        <label for="forgotEmail" class="form-label">Email</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                                            <input type="email" class="form-control" id="forgotEmail" required>
                                        </div>
                                    </div>
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary">G·ª≠i Email ƒê·∫∑t L·∫°i</button>
                                    </div>
                                </form>
                                <div class="text-center mt-3">
                                    <a href="#" class="text-decoration-none" onclick="showSection('loginSection')">Quay l·∫°i ƒëƒÉng nh·∫≠p</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reset Password Section -->
    <div id="resetPasswordSection" class="form-section">
        <div class="login-container">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="card">
                            <div class="card-body p-4">
                                <div class="text-center mb-4">
                                    <h2 class="card-title">ƒê·∫∑t L·∫°i M·∫≠t Kh·∫©u</h2>
                                    <p class="text-muted">Nh·∫≠p m·∫≠t kh·∫©u m·ªõi</p>
                                </div>
                                <form id="resetPasswordForm">
                                    <div class="mb-3">
                                        <label for="newPassword" class="form-label">M·∫≠t kh·∫©u m·ªõi</label>
                                        <input type="password" class="form-control" id="newPassword" required>
                                        <div class="strength-meter">
                                            <div class="strength-bar" id="resetStrengthBar"></div>
                                        </div>
                                        <small class="text-muted" id="resetStrengthText">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh</small>
                                    </div>
                                    <div class="mb-3">
                                        <label for="confirmNewPassword" class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label>
                                        <input type="password" class="form-control" id="confirmNewPassword" required>
                                    </div>
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary">ƒê·∫∑t L·∫°i M·∫≠t Kh·∫©u</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboardSection" class="form-section">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar p-0">
                <div class="p-3">
                    <h5 class="mb-3">Qu·∫£n L√Ω T√†i Kho·∫£n - M·ªπ Ph·∫©m</h5>
                    <div class="nav nav-pills flex-column">
                        <a class="nav-link active" href="#" onclick="showDashboardTab('profileTab')">
                            <i class="bi bi-person-circle me-2"></i>Th√¥ng Tin
                        </a>
                        <a class="nav-link" href="#" onclick="showDashboardTab('addressTab')">
                            <i class="bi bi-geo-alt me-2"></i>ƒê·ªãa Ch·ªâ
                        </a>
                        <a class="nav-link" href="#" onclick="showDashboardTab('ordersTab')">
                            <i class="bi bi-bag-check me-2"></i>ƒê∆°n H√†ng
                        </a>
                        <hr class="my-3">
                        <a class="nav-link text-danger" href="#" onclick="logout()">
                            <i class="bi bi-box-arrow-right me-2"></i>ƒêƒÉng Xu·∫•t
                        </a>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10">
                <div class="p-4">
                    <!-- Profile, Settings & Change Password Tab -->
                    <div id="profileTab" class="dashboard-tab">
                        <div class="row">
                            <!-- Profile Avatar and Info - Made Larger -->
                            <div class="col-md-5">
                                <div class="card h-100">
                                    <div class="card-body text-center d-flex flex-column justify-content-center">
                                        <div class="profile-avatar mx-auto mb-4" id="profileAvatar">
                                            <i class="bi bi-person" style="font-size: 4rem;"></i>
                                            <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="handleAvatarChange(event)">
                                        </div>
                                        <h4 id="profileName" class="mb-2">Ng∆∞·ªùi d√πng</h4>
                                        <p class="text-muted mb-3" id="profileEmail">user@example.com</p>
                                        <span class="badge bg-success fs-6 px-3 py-2 mb-4">Email ƒë√£ x√°c th·ª±c</span>
                                        
                                        <!-- Test Avatar Button -->
                                        <div class="mb-3">
                                            <button class="btn btn-outline-primary btn-sm" onclick="testAvatarFunction()" title="Thay ƒë·ªïi ·∫£nh ƒë·∫°i di·ªán">
                                                <i class="bi bi-camera"></i> Thay ƒë·ªïi ·∫£nh ƒë·∫°i di·ªán
                                            </button>
                                        </div>
                                        
                                        <!-- Quick Stats -->
                                        <div class="mt-auto">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="border-end">
                                                        <h5 class="text-primary mb-1" id="userTotalOrders">5</h5>
                                                        <small class="text-muted">ƒê∆°n h√†ng</small>
                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <div class="border-end">
                                                        <h5 class="text-success mb-1" id="userTotalSpent">‚Ç´11.4M</h5>
                                                        <small class="text-muted">ƒê√£ mua</small>
                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <h5 class="text-info mb-1" id="memberSince">01/2025</h5>
                                                    <small class="text-muted">Th√†nh vi√™n</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Profile Settings & Forms - Made Larger -->
                            <div class="col-md-7">
                                <!-- Navigation Tabs -->
                                <ul class="nav nav-tabs nav-justified" id="profileTabs" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="profile-info-tab" data-bs-toggle="tab" data-bs-target="#profile-info" type="button" role="tab">
                                            <i class="bi bi-person me-1"></i>Th√¥ng tin c√° nh√¢n
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="change-password-tab" data-bs-toggle="tab" data-bs-target="#change-password" type="button" role="tab">
                                            <i class="bi bi-key me-1"></i>ƒê·ªïi m·∫≠t kh·∫©u
                                        </button>
                                    </li>
                                </ul>
                                
                                <div class="tab-content mt-3" id="profileTabsContent">
                                    <!-- Profile Information -->
                                    <div class="tab-pane fade show active" id="profile-info" role="tabpanel">
                                        <div class="card">
                                            <div class="card-header text-center py-1">
                                                <h6 class="card-title mb-0">
                                                    <i class="bi bi-person-lines-fill me-1"></i>Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n
                                                </h6>
                                            </div>
                                            <div class="card-body p-3">
                                                <form id="profileForm" autocomplete="off" novalidate>
                                                    <div class="row">
                                                        <div class="col-md-6 mb-2">
                                                            <label for="editName" class="form-label">
                                                                <i class="bi bi-person me-1"></i>H·ªç v√† t√™n *
                                                            </label>
                                                            <input type="text" class="form-control" id="editName" required onkeydown="preventEnterSubmit(event)">
                                                        </div>
                                                        <div class="col-md-6 mb-2">
                                                            <label for="editEmail" class="form-label">
                                                                <i class="bi bi-envelope me-1"></i>Email *
                                                            </label>
                                                            <input type="email" class="form-control" id="editEmail" required onkeydown="preventEnterSubmit(event)">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mb-2">
                                                            <label for="editPhone" class="form-label">
                                                                <i class="bi bi-telephone me-1"></i>S·ªë ƒëi·ªán tho·∫°i
                                                            </label>
                                                            <input type="tel" class="form-control" id="editPhone" onkeydown="preventEnterSubmit(event)">
                                                        </div>
                                                        <div class="col-md-6 mb-2">
                                                            <label for="editBirthday" class="form-label">
                                                                <i class="bi bi-calendar me-1"></i>Ng√†y sinh
                                                            </label>
                                                            <input type="date" class="form-control" id="editBirthday" onkeydown="preventEnterSubmit(event)">
                                                        </div>
                                                    </div>
                                                    <div class="mb-2">
                                                        <label class="form-label">
                                                            <i class="bi bi-gender-ambiguous me-1"></i>Gi·ªõi t√≠nh
                                                        </label>
                                                        <div class="d-flex gap-4 mt-2">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio" name="gender" id="genderMale" value="male">
                                                                <label class="form-check-label" for="genderMale">
                                                                    <i class="bi bi-person me-1"></i>Nam
                                                                </label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio" name="gender" id="genderFemale" value="female">
                                                                <label class="form-check-label" for="genderFemale">
                                                                    <i class="bi bi-person-dress me-1"></i>N·ªØ
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- Email Notification Settings -->
                                                    <div class="mb-2">
                                                        <label class="form-label">
                                                            <i class="bi bi-bell me-1"></i>Th√¥ng b√°o
                                                        </label>
                                                        <div class="border rounded p-2 bg-light mt-2">
                                                            <div class="form-check form-switch">
                                                                <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                                                <label class="form-check-label" for="emailNotifications">
                                                                    <i class="bi bi-envelope me-1"></i>Email th√¥ng b√°o ƒë∆°n h√†ng
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex gap-2">
                                                        <button type="submit" class="btn btn-primary">
                                                            <i class="bi bi-check-lg me-1"></i>L∆∞u thay ƒë·ªïi
                                                        </button>
                                                        <button type="button" class="btn btn-outline-secondary" onclick="resetProfileForm()">
                                                            <i class="bi bi-arrow-counterclockwise me-1"></i>ƒê·∫∑t l·∫°i
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Change Password -->
                                    <div class="tab-pane fade" id="change-password" role="tabpanel">
                                        <div class="card">
                                            <div class="card-header text-center py-1">
                                                <h6 class="card-title mb-0">
                                                    <i class="bi bi-shield-lock me-1"></i>ƒê·ªïi m·∫≠t kh·∫©u
                                                </h6>
                                            </div>
                                            <div class="card-body p-2">
                                                <form id="changePasswordForm">
                                                    <div class="mb-1">
                                                        <label for="currentPassword" class="form-label">M·∫≠t kh·∫©u hi·ªán t·∫°i *</label>
                                                        <div class="input-group">
                                                            <input type="password" class="form-control" id="currentPassword" required>
                                                            <button class="btn btn-outline-secondary" type="button" id="toggleCurrentPassword">
                                                                <i class="bi bi-eye"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="mb-1">
                                                        <label for="newPasswordChange" class="form-label">M·∫≠t kh·∫©u m·ªõi *</label>
                                                        <div class="input-group">
                                                            <input type="password" class="form-control" id="newPasswordChange" required>
                                                            <button class="btn btn-outline-secondary" type="button" id="toggleNewPasswordChange">
                                                                <i class="bi bi-eye"></i>
                                                            </button>
                                                        </div>
                                                        <div class="strength-meter mt-1">
                                                            <div class="strength-bar" id="changeStrengthBar"></div>
                                                        </div>
                                                        <small class="text-muted" id="changeStrengthText">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh</small>
                                                    </div>
                                                    <div class="mb-1">
                                                        <label for="confirmNewPasswordChange" class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi *</label>
                                                        <div class="input-group">
                                                            <input type="password" class="form-control" id="confirmNewPasswordChange" required>
                                                            <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPasswordChange">
                                                                <i class="bi bi-eye"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <small class="text-muted d-block mb-1">
                                                        <i class="bi bi-info-circle me-1"></i>
                                                        M·∫≠t kh·∫©u n√™n c√≥ √≠t nh·∫•t 8 k√Ω t·ª±, bao g·ªìm ch·ªØ hoa, s·ªë v√† k√Ω t·ª± ƒë·∫∑c bi·ªát
                                                    </small>
                                                    <div class="d-flex gap-2">
                                                        <button type="submit" class="btn btn-primary">
                                                            <i class="bi bi-shield-check me-1"></i>ƒê·ªïi m·∫≠t kh·∫©u
                                                        </button>
                                                        <button type="button" class="btn btn-outline-secondary">
                                                            <i class="bi bi-x me-1"></i>H·ªßy
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Address Management Tab -->
                    <div id="addressTab" class="dashboard-tab" style="display: none;">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Qu·∫£n L√Ω ƒê·ªãa Ch·ªâ Giao H√†ng</h5>
                                <div>
                                    <button class="btn btn-sm btn-primary" onclick="openAddressModal()">
                                        <i class="bi bi-plus-circle"></i> Th√™m ƒê·ªãa Ch·ªâ M·ªõi
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- Address Search and Filter -->
                                <div class="address-search-container">
                                    <input type="text" class="form-control address-search-input" id="addressSearch" 
                                           placeholder="T√¨m ki·∫øm ƒë·ªãa ch·ªâ theo t√™n, s·ªë ƒëi·ªán tho·∫°i, ƒë·ªãa ch·ªâ...">
                                    <i class="bi bi-search address-search-icon"></i>
                                </div>
                                <!-- Address Statistics -->
                                <div class="row mb-4">
                                    <div class="col-md-4 mb-3">
                                        <div class="card bg-info text-white">
                                            <div class="card-body text-center">
                                                <i class="bi bi-geo-alt-fill mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">T·ªïng ƒê·ªãa Ch·ªâ</h6>
                                                <h4 id="totalAddresses">0</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="card bg-success text-white">
                                            <div class="card-body text-center">
                                                <i class="bi bi-star-fill mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">ƒê·ªãa Ch·ªâ M·∫∑c ƒê·ªãnh</h6>
                                                <h4 id="defaultAddress">1</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="card bg-warning text-white">
                                            <div class="card-body text-center">
                                                <i class="bi bi-house-fill mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">ƒê·ªãa Ch·ªâ Kh√°c</h6>
                                                <h4 id="otherAddresses">0</h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Address List -->
                                <div id="addressList">
                                    <!-- Address items will be loaded here by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Orders Tab -->
                    <div id="ordersTab" class="dashboard-tab" style="display: none;">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Qu·∫£n L√Ω ƒê∆°n H√†ng</h5>
                                <div>
                                    <button class="btn btn-sm btn-outline-primary" onclick="refreshOrders()">
                                        <i class="bi bi-arrow-clockwise"></i> L√†m m·ªõi
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- Order Statistics -->
                                <div class="row mb-4">
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="card order-status-pending text-white" style="cursor: pointer;" onclick="filterOrdersByStatus('pending')">
                                            <div class="card-body text-center">
                                                <i class="bi bi-clock-history mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">Ch·ªù x√°c nh·∫≠n</h6>
                                                <h4 id="pendingCount">2</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="card order-status-shipping text-white" style="cursor: pointer;" onclick="filterOrdersByStatus('shipping')">
                                            <div class="card-body text-center">
                                                <i class="bi bi-truck mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">ƒêang giao</h6>
                                                <h4 id="shippingCount">1</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="card order-status-delivered text-white" style="cursor: pointer;" onclick="filterOrdersByStatus('delivered')">
                                            <div class="card-body text-center">
                                                <i class="bi bi-check-circle mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">ƒê√£ giao</h6>
                                                <h4 id="deliveredCount">5</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="card order-status-all text-white" style="cursor: pointer;" onclick="filterOrdersByStatus('')">
                                            <div class="card-body text-center">
                                                <i class="bi bi-basket mb-2" style="font-size: 2rem;"></i>
                                                <h6 class="card-title">T·∫•t c·∫£ ƒë∆°n</h6>
                                                <h4 id="totalCount">8</h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Orders List -->
                                <div id="ordersList">
                                    <!-- Sample orders will be loaded here by JavaScript -->
                                </div>

                                <!-- Pagination -->
                                <nav aria-label="Orders pagination" class="mt-4">
                                    <ul class="pagination justify-content-center" id="ordersPagination">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#">Tr∆∞·ªõc</a>
                                        </li>
                                        <li class="page-item active">
                                            <a class="page-link" href="#">1</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">2</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">Sau</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Theme management
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        
        function updateTheme(theme) {
            document.documentElement.setAttribute('data-bs-theme', theme);
            themeIcon.className = theme === 'dark' ? 'bi bi-moon-fill' : 'bi bi-sun-fill';
            localStorage.setItem('theme', theme);
        }

        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-bs-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            updateTheme(newTheme);
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        updateTheme(savedTheme);

        // Advanced background effects
        function createDynamicParticles() {
            const background = document.querySelector('.animated-background');
            
            // Create additional floating particles
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * -10 + 's';
                particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
                background.appendChild(particle);
            }

            // Create additional sparkles
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * -3 + 's';
                sparkle.style.animationDuration = (Math.random() * 2 + 2) + 's';
                background.appendChild(sparkle);
            }

            // Create additional geometric shapes
            const shapes = ['circle', 'triangle', 'square', 'diamond'];
            for (let i = 0; i < 12; i++) {
                const shape = document.createElement('div');
                const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                shape.className = `geo-shape ${randomShape}`;
                shape.style.top = Math.random() * 100 + '%';
                shape.style.left = Math.random() * 100 + '%';
                shape.style.animationDelay = Math.random() * -12 + 's';
                shape.style.animationDuration = (Math.random() * 5 + 10) + 's';
                background.appendChild(shape);
            }
        }

        // Mouse interaction with background
        function addMouseInteraction() {
            let mouseX = 0;
            let mouseY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX / window.innerWidth;
                mouseY = e.clientY / window.innerHeight;

                // Update floating icons based on mouse position
                const floatingIcons = document.querySelectorAll('.floating-icons');
                floatingIcons.forEach((icon, index) => {
                    const speed = (index % 3 + 1) * 0.5;
                    const offsetX = (mouseX - 0.5) * speed * 20;
                    const offsetY = (mouseY - 0.5) * speed * 20;
                    icon.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
                });

                // Update particles
                const particles = document.querySelectorAll('.particle');
                particles.forEach((particle, index) => {
                    const speed = (index % 2 + 1) * 0.3;
                    const offsetX = (mouseX - 0.5) * speed * 15;
                    particle.style.transform = `translateX(${offsetX}px)`;
                });
            });
        }

        // Random color pulse effect
        function addColorPulse() {
            const shapes = document.querySelectorAll('.geo-shape, .sparkle');
            
            setInterval(() => {
                shapes.forEach(shape => {
                    if (Math.random() > 0.8) {
                        shape.style.animationPlayState = 'paused';
                        shape.style.transform = shape.style.transform + ' scale(1.5)';
                        shape.style.opacity = '0.3';
                        
                        setTimeout(() => {
                            shape.style.animationPlayState = 'running';
                            shape.style.transform = shape.style.transform.replace(' scale(1.5)', '');
                            shape.style.opacity = '';
                        }, 500);
                    }
                });
            }, 2000);
        }

        // Floating cosmetic icons with special effects
        function enhanceFloatingIcons() {
            const cosmeticIcons = document.querySelectorAll('.floating-icons');
            
            cosmeticIcons.forEach((icon, index) => {
                // Add hover effect
                icon.addEventListener('mouseenter', () => {
                    icon.style.transform = 'scale(1.5) rotate(360deg)';
                    icon.style.opacity = '0.5';
                    icon.style.color = 'var(--nature-green-accent)';
                    icon.style.filter = 'drop-shadow(0 0 20px var(--nature-green-accent))';
                });
                
                icon.addEventListener('mouseleave', () => {
                    icon.style.transform = '';
                    icon.style.opacity = '';
                    icon.style.color = '';
                    icon.style.filter = '';
                });

                // Random twinkle effect
                if (Math.random() > 0.7) {
                    setInterval(() => {
                        icon.style.opacity = Math.random() * 0.3 + 0.1;
                        setTimeout(() => {
                            icon.style.opacity = '';
                        }, 200);
                    }, Math.random() * 3000 + 2000);
                }
            });
        }

        // Test avatar function (simplified)
        function testAvatarFunction() {
            const avatarInput = document.getElementById('avatarInput');
            if (avatarInput) {
                avatarInput.click();
            } else {
                // Create input if not found
                ensureAvatarInput();
                const newInput = document.getElementById('avatarInput');
                if (newInput) {
                    newInput.click();
                }
            }
        }

        // Ensure avatar input exists
        function ensureAvatarInput() {
            let avatarInput = document.getElementById('avatarInput');
            const avatarElement = document.getElementById('profileAvatar');
            
            if (!avatarInput && avatarElement) {
                // Create the input
                avatarInput = document.createElement('input');
                avatarInput.type = 'file';
                avatarInput.id = 'avatarInput';
                avatarInput.accept = 'image/*';
                avatarInput.style.display = 'none';
                avatarInput.onchange = handleAvatarChange;
                
                // Add to avatar element
                avatarElement.appendChild(avatarInput);
            }
            
            return avatarInput;
        }

        // Initialize all background effects
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                createDynamicParticles();
                addMouseInteraction();
                addColorPulse();
                enhanceFloatingIcons();
                loadSavedAvatar(); // Load saved avatar when page loads
                
                // Ensure avatar input exists after page load
                ensureAvatarInput();
            }, 1000);
        });

        // Toast notification function
        function showToast(message, type = 'success') {
            const toastContainer = document.createElement('div');
            toastContainer.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
            `;
            
            toastContainer.innerHTML = `
                <div class="toast show align-items-center text-white bg-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'} border-0" role="alert">
                    <div class="d-flex">
                        <div class="toast-body">
                            <i class="bi bi-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-triangle' : 'info-circle'} me-2"></i>
                            ${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" onclick="this.closest('div[style*=\"position: fixed\"]').remove()"></button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(toastContainer);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                if (toastContainer.parentNode) {
                    toastContainer.remove();
                }
            }, 4000);
        }

        // Show/hide sections
        function showSection(sectionId) {
            console.log('showSection called with:', sectionId);
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                console.log('Section activated:', sectionId);
            } else {
                console.error('Section not found:', sectionId);
            }
        }

        // Dashboard tabs
        function showDashboardTab(tabId) {
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.style.display = 'none';
            });
            document.getElementById(tabId).style.display = 'block';
            
            // Load specific content based on tab
            if (tabId === 'addressTab') {
                loadAddresses();
            } else if (tabId === 'ordersTab') {
                loadOrders();
                updateOrderStatistics();
            }
            
            // Update sidebar nav
            document.querySelectorAll('.sidebar .nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Password strength checker
        function checkPasswordStrength(password, barId, textId) {
            const bar = document.getElementById(barId);
            const text = document.getElementById(textId);
            
            if (password.length === 0) {
                bar.style.width = '0%';
                bar.className = 'strength-bar';
                text.textContent = 'Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh';
                return;
            }
            
            let score = 0;
            if (password.length >= 8) score++;
            if (/[a-z]/.test(password)) score++;
            if (/[A-Z]/.test(password)) score++;
            if (/[0-9]/.test(password)) score++;
            if (/[^A-Za-z0-9]/.test(password)) score++;
            
            if (score <= 2) {
                bar.style.width = '33%';
                bar.className = 'strength-bar strength-weak';
                text.textContent = 'M·∫≠t kh·∫©u y·∫øu';
            } else if (score <= 3) {
                bar.style.width = '66%';
                bar.className = 'strength-bar strength-medium';
                text.textContent = 'M·∫≠t kh·∫©u trung b√¨nh';
            } else {
                bar.style.width = '100%';
                bar.className = 'strength-bar strength-strong';
                text.textContent = 'M·∫≠t kh·∫©u m·∫°nh';
            }
        }

        // Password visibility toggles
        function setupPasswordToggle(inputId, buttonId) {
            console.log('Setting up password toggle for:', inputId, buttonId);
            const input = document.getElementById(inputId);
            const button = document.getElementById(buttonId);
            
            console.log('Elements found:', { input: !!input, button: !!button });
            
            if (input && button) {
                button.addEventListener('click', () => {
                    console.log('Password toggle clicked for:', inputId);
                    const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
                    input.setAttribute('type', type);
                    const icon = button.querySelector('i');
                    if (icon) {
                        icon.className = type === 'password' ? 'bi bi-eye' : 'bi bi-eye-slash';
                        console.log('Password visibility changed to:', type);
                    } else {
                        console.error('Icon not found in button');
                    }
                });
                console.log('Password toggle setup complete for:', inputId);
            } else {
                console.error('Failed to setup password toggle. Input:', !!input, 'Button:', !!button);
            }
        }

        // Avatar change handler
        function handleAvatarChange(event) {
            const file = event.target.files[0];
            if (file) {
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    return;
                }
                
                // Validate file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    return;
                }
                
                // Open crop modal
                openCropModal(file)
                    .then(croppedDataUrl => {
                        // Apply the cropped image to avatar
                        updateAvatarWithImage(croppedDataUrl);
                        localStorage.setItem('userAvatar', croppedDataUrl);
                    })
                    .catch(error => {
                        console.error('L·ªói khi crop image:', error);
                    });
            }
        }

        function updateAvatarWithImage(imageDataUrl) {
            const avatarElement = document.getElementById('profileAvatar');
            
            if (avatarElement) {
                // Set background image with highest quality settings
                avatarElement.style.backgroundImage = `url(${imageDataUrl})`;
                avatarElement.style.backgroundSize = 'cover';
                avatarElement.style.backgroundPosition = 'center center';
                avatarElement.style.backgroundRepeat = 'no-repeat';
                avatarElement.style.imageRendering = 'optimizeQuality';
                avatarElement.style.imageRendering = 'high-quality';
                avatarElement.style.imageRendering = '-webkit-optimize-contrast';
                avatarElement.style.filter = 'contrast(1.1) brightness(1.05) saturate(1.1)';
                avatarElement.style.webkitFilter = 'contrast(1.1) brightness(1.05) saturate(1.1)';
                avatarElement.style.webkitBackfaceVisibility = 'hidden';
                avatarElement.style.backfaceVisibility = 'hidden';
                avatarElement.style.webkitTransform = 'translateZ(0)';
                avatarElement.style.transform = 'translateZ(0)';
                
                // Clear the icon but keep the camera button
                const personIcon = avatarElement.querySelector('.bi-person');
                if (personIcon) {
                    personIcon.style.display = 'none';
                }
                
                // Remove all content - no camera button needed
                avatarElement.innerHTML = `
                    <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="handleAvatarChange(event)">
                `;
            }
        }

        // Image Cropping Functions
        let currentImage = null;
        let cropCanvas = null;
        let cropCtx = null;
        let isDragging = false;
        let dragStart = { x: 0, y: 0 };
        let imagePosition = { x: 0, y: 0 };
        let imageScale = 1;

        function openCropModal(file) {
            return new Promise((resolve, reject) => {
                const modal = new bootstrap.Modal(document.getElementById('cropModal'));
                cropCanvas = document.getElementById('cropCanvas');
                cropCtx = cropCanvas.getContext('2d');
                
                // Enable high-quality rendering
                cropCtx.imageSmoothingEnabled = true;
                cropCtx.imageSmoothingQuality = 'high';
                
                const img = new Image();
                img.onload = function() {
                    currentImage = img;
                    resetCropSettings();
                    drawCanvas();
                    modal.show();
                    
                    // Setup event listeners
                    setupCropEventListeners(resolve, reject, modal);
                };
                
                img.onerror = () => reject('Kh√¥ng th·ªÉ load ·∫£nh');
                img.src = URL.createObjectURL(file);
            });
        }

        function setupCropEventListeners(resolve, reject, modal) {
            const zoomSlider = document.getElementById('zoomSlider');
            const resetBtn = document.getElementById('resetCrop');
            const applyCropBtn = document.getElementById('applyCrop');

            // Zoom functionality with smooth animation
            zoomSlider.oninput = function() {
                imageScale = parseFloat(this.value);
                // Use requestAnimationFrame for smoother zoom
                requestAnimationFrame(() => {
                    drawCanvas();
                });
            };

            // Reset crop
            resetBtn.onclick = function() {
                resetCropSettings();
                zoomSlider.value = 1;
                drawCanvas();
            };

            // Apply crop
            applyCropBtn.onclick = function() {
                try {
                    // Create canvas with better scaling for higher quality
                    const tempCanvas = document.createElement('canvas');
                    const tempCtx = tempCanvas.getContext('2d');
                    
                    // Set high DPI scaling for better quality - tƒÉng k√≠ch th∆∞·ªõc output
                    const scale = window.devicePixelRatio || 1;
                    const size = 300 * scale; // Gi·∫£m t·ª´ 400 xu·ªëng 300
                    
                    tempCanvas.width = size;
                    tempCanvas.height = size;
                    tempCanvas.style.width = '300px'; // Gi·∫£m t·ª´ 400px xu·ªëng 300px
                    tempCanvas.style.height = '300px'; // Gi·∫£m t·ª´ 400px xu·ªëng 300px
                    
                    // Scale context for high DPI with smoother rendering
                    tempCtx.scale(scale, scale);
                    tempCtx.imageSmoothingEnabled = true;
                    tempCtx.imageSmoothingQuality = 'high';
                    tempCtx.webkitImageSmoothingEnabled = true;
                    tempCtx.mozImageSmoothingEnabled = true;
                    tempCtx.msImageSmoothingEnabled = true;
                    
                    // Draw the cropped area with high quality
                    const scaledWidth = currentImage.width * imageScale;
                    const scaledHeight = currentImage.height * imageScale;
                    
                    tempCtx.drawImage(
                        currentImage,
                        imagePosition.x,
                        imagePosition.y,
                        scaledWidth,
                        scaledHeight
                    );
                    
                    // Create high quality PNG with maximum quality
                    const croppedDataUrl = tempCanvas.toDataURL('image/png', 1.0);
                    modal.hide();
                    resolve(croppedDataUrl);
                } catch (error) {
                    reject(error);
                }
            };

            // Mouse events for dragging
            cropCanvas.addEventListener('mousedown', startDrag);
            cropCanvas.addEventListener('mousemove', drag);
            cropCanvas.addEventListener('mouseup', stopDrag);
            cropCanvas.addEventListener('mouseleave', stopDrag);

            // Touch events for mobile
            cropCanvas.addEventListener('touchstart', handleTouch);
            cropCanvas.addEventListener('touchmove', handleTouch);
            cropCanvas.addEventListener('touchend', stopDrag);
        }

        function resetCropSettings() {
            if (!currentImage) return;
            
            const canvasSize = 300; // Gi·∫£m t·ª´ 400 xu·ªëng 300
            const imgAspect = currentImage.width / currentImage.height;
            
            // Center the image and fit it to canvas
            if (imgAspect > 1) {
                // Landscape image
                imageScale = canvasSize / currentImage.width;
            } else {
                // Portrait image
                imageScale = canvasSize / currentImage.height;
            }
            
            const scaledWidth = currentImage.width * imageScale;
            const scaledHeight = currentImage.height * imageScale;
            
            imagePosition.x = (canvasSize - scaledWidth) / 2;
            imagePosition.y = (canvasSize - scaledHeight) / 2;
        }

        function drawCanvas() {
            if (!currentImage || !cropCtx) return;
            
            const canvasSize = 300; // Gi·∫£m t·ª´ 400 xu·ªëng 300
            
            // Clear canvas
            cropCtx.clearRect(0, 0, canvasSize, canvasSize);
            
            // Enable high-quality rendering with smoother interpolation
            cropCtx.imageSmoothingEnabled = true;
            cropCtx.imageSmoothingQuality = 'high';
            cropCtx.webkitImageSmoothingEnabled = true;
            cropCtx.mozImageSmoothingEnabled = true;
            cropCtx.msImageSmoothingEnabled = true;
            
            // Draw image with high quality
            const scaledWidth = currentImage.width * imageScale;
            const scaledHeight = currentImage.height * imageScale;
            
            cropCtx.drawImage(
                currentImage,
                imagePosition.x,
                imagePosition.y,
                scaledWidth,
                scaledHeight
            );
            
            // Draw crop overlay with smoother edges
            cropCtx.save();
            cropCtx.globalAlpha = 0.4;
            cropCtx.fillStyle = '#000';
            cropCtx.fillRect(0, 0, canvasSize, canvasSize);
            
            // Clear center circle for crop area with smoother edges
            cropCtx.globalCompositeOperation = 'destination-out';
            cropCtx.beginPath();
            cropCtx.arc(canvasSize/2, canvasSize/2, canvasSize/2 - 15, 0, 2 * Math.PI); // Gi·∫£m border t·ª´ 10 xu·ªëng 15
            cropCtx.fill();
            
            // Add subtle border around crop area
            cropCtx.globalCompositeOperation = 'source-over';
            cropCtx.globalAlpha = 0.8;
            cropCtx.strokeStyle = 'var(--nature-green-accent)';
            cropCtx.lineWidth = 3;
            cropCtx.beginPath();
            cropCtx.arc(canvasSize/2, canvasSize/2, canvasSize/2 - 15, 0, 2 * Math.PI);
            cropCtx.stroke();
            
            cropCtx.restore();
        }

        function startDrag(e) {
            isDragging = true;
            const rect = cropCanvas.getBoundingClientRect();
            dragStart.x = e.clientX - rect.left - imagePosition.x;
            dragStart.y = e.clientY - rect.top - imagePosition.y;
            cropCanvas.style.cursor = 'grabbing';
            cropCanvas.style.transform = 'scale(1.02)'; // Th√™m hi·ªáu ·ª©ng zoom nh·∫π khi k√©o
        }

        function drag(e) {
            if (!isDragging) return;
            
            const rect = cropCanvas.getBoundingClientRect();
            imagePosition.x = e.clientX - rect.left - dragStart.x;
            imagePosition.y = e.clientY - rect.top - dragStart.y;
            
            // Smooth drawing with requestAnimationFrame
            requestAnimationFrame(() => {
                drawCanvas();
            });
        }

        function stopDrag() {
            isDragging = false;
            cropCanvas.style.cursor = 'grab';
            cropCanvas.style.transform = 'scale(1)'; // Tr·ªü v·ªÅ k√≠ch th∆∞·ªõc b√¨nh th∆∞·ªùng
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type.replace('touch', 'mouse'), {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            cropCanvas.dispatchEvent(mouseEvent);
        }

        // Load saved avatar on page load
        function loadSavedAvatar() {
            const savedAvatar = localStorage.getItem('userAvatar');
            
            // Ensure avatar input exists
            ensureAvatarInput();
            
            if (savedAvatar) {
                updateAvatarWithImage(savedAvatar);
            }
        }

        // Sync avatar across all tabs
        function syncAvatarAcrossTabs(avatarContent) {
            const avatarElement = document.getElementById('profileAvatar');
            
            if (avatarElement && typeof avatarContent === 'string') {
                avatarElement.innerHTML = avatarContent;
                avatarElement.style.backgroundImage = '';
                // Ensure consistent styling
                avatarElement.style.width = '200px';
                avatarElement.style.height = '200px';
                avatarElement.style.fontSize = '4rem';
                avatarElement.style.borderRadius = '50%';
                avatarElement.style.display = 'flex';
                avatarElement.style.alignItems = 'center';
                avatarElement.style.justifyContent = 'center';
                avatarElement.style.minWidth = '200px';
                avatarElement.style.minHeight = '200px';
            }
        }

        // Password strength monitoring
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize password toggles
            setupPasswordToggle('loginPassword', 'toggleLoginPassword');
            setupPasswordToggle('registerPassword', 'toggleRegisterPassword');
            setupPasswordToggle('currentPassword', 'toggleCurrentPassword');
            setupPasswordToggle('newPasswordChange', 'toggleNewPasswordChange');
            setupPasswordToggle('confirmNewPasswordChange', 'toggleConfirmPasswordChange');
            setupPasswordToggle('newPassword', 'toggleNewPassword');
            
            const registerPassword = document.getElementById('registerPassword');
            const newPasswordChange = document.getElementById('newPasswordChange');
            const newPassword = document.getElementById('newPassword');

            if (registerPassword) {
                registerPassword.addEventListener('input', (e) => {
                    checkPasswordStrength(e.target.value, 'strengthBar', 'strengthText');
                });
            }

            if (newPasswordChange) {
                newPasswordChange.addEventListener('input', (e) => {
                    checkPasswordStrength(e.target.value, 'changeStrengthBar', 'changeStrengthText');
                });
            }

            if (newPassword) {
                newPassword.addEventListener('input', (e) => {
                    checkPasswordStrength(e.target.value, 'resetStrengthBar', 'resetStrengthText');
                });
            }
        });

        // Form submissions - Moved inside DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            // Login form
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    console.log('Login form submitted');
                    // Simulate login
                    showSection('dashboardSection');
                });
            }

            // Register form
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const password = document.getElementById('registerPassword').value;
                    const confirmPassword = document.getElementById('confirmPassword').value;
                    
                    if (password !== confirmPassword) {
                        alert('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!');
                        return;
                    }
                    
                    alert('ƒêƒÉng k√Ω th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p.');
                    showSection('loginSection');
                });
            }

            // Forgot password form
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            if (forgotPasswordForm) {
                forgotPasswordForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    showSection('resetPasswordSection');
                });
            }

            // Reset password form
            const resetPasswordForm = document.getElementById('resetPasswordForm');
            if (resetPasswordForm) {
                resetPasswordForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const newPassword = document.getElementById('newPassword').value;
                    const confirmNewPassword = document.getElementById('confirmNewPassword').value;
                    
                    if (newPassword !== confirmNewPassword) {
                        alert('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!');
                        return;
                    }
                    
                    alert('ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p.');
                    showSection('loginSection');
                });
            }

            // Change password form
            const changePasswordForm = document.getElementById('changePasswordForm');
            if (changePasswordForm) {
                changePasswordForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const newPassword = document.getElementById('newPasswordChange').value;
                    const confirmPassword = document.getElementById('confirmNewPasswordChange').value;
                    
                    if (newPassword !== confirmPassword) {
                        alert('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!');
                        return;
                    }
                    
                    alert('Thay ƒë·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng!');
                });
            }
        });

        // Handle login function
        function handleLogin(event) {
            console.log('handleLogin called');
            event.preventDefault();
            
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            console.log('Login attempt:', { username, password: password ? '***' : '' });
            
            if (!username || !password) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin ƒëƒÉng nh·∫≠p!');
                return;
            }
            
            // Simulate login success
            console.log('Login successful, redirecting to dashboard');
            showSection('dashboardSection');
        }

        // Function to prevent Enter key submission on input fields
        function preventEnterSubmit(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                event.stopPropagation();
                event.stopImmediatePropagation();
                return false;
            }
        }

        // Prevent form submission with Enter key
        document.getElementById('profileForm').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                return false;
            }
        });

        // Also prevent on keypress and keyup for extra safety
        document.getElementById('profileForm').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                return false;
            }
        });

        document.getElementById('profileForm').addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                return false;
            }
        });

        // Handle form submission only via submit button
        document.getElementById('profileForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Check if submission is triggered by Enter key (additional safety)
            if (e.submitter && e.submitter.type === 'submit' && e.submitter.textContent.includes('L∆∞u thay ƒë·ªïi')) {
                // This is a legitimate button click submission
                processProfileFormSubmission();
            } else {
                // Prevent any other type of submission silently
                return false;
            }
        });

        // Function to handle the actual form submission
        function processProfileFormSubmission() {
            // Get updated values from form
            const updatedName = document.getElementById('editName').value;
            const updatedEmail = document.getElementById('editEmail').value;
            const updatedPhone = document.getElementById('editPhone').value;
            const updatedBirthday = document.getElementById('editBirthday').value;
            const emailNotifications = document.getElementById('emailNotifications').checked;
            
            // Get selected gender
            let updatedGender = '';
            const genderRadios = document.querySelectorAll('input[name="gender"]');
            genderRadios.forEach(radio => {
                if (radio.checked) {
                    updatedGender = radio.value;
                }
            });
            
            // Update display elements
            document.getElementById('profileName').textContent = updatedName;
            document.getElementById('profileEmail').textContent = updatedEmail;
            
            // Update profile data object (for future use)
            const profileData = {
                name: updatedName,
                email: updatedEmail,
                phone: updatedPhone,
                birthday: updatedBirthday,
                gender: updatedGender,
                emailNotifications: emailNotifications
            };
            
            // Save to localStorage for persistence
            localStorage.setItem('profileData', JSON.stringify(profileData));
            
            // Close modal if exists
            const modal = bootstrap.Modal.getInstance(document.getElementById('editProfileModal'));
            if (modal) {
                modal.hide();
            }
        }

        // Reset profile form function
        function resetProfileForm() {
            const form = document.getElementById('profileForm');
            if (form) {
                // Load saved data from localStorage and restore to form
                const savedData = localStorage.getItem('profileData');
                if (savedData) {
                    const profileData = JSON.parse(savedData);
                    
                    // Restore form fields with saved data
                    document.getElementById('editName').value = profileData.name || '';
                    document.getElementById('editEmail').value = profileData.email || '';
                    document.getElementById('editPhone').value = profileData.phone || '';
                    document.getElementById('editBirthday').value = profileData.birthday || '';
                    
                    // Set gender radio button
                    if (profileData.gender) {
                        const genderRadio = document.querySelector(`input[name="gender"][value="${profileData.gender}"]`);
                        if (genderRadio) {
                            genderRadio.checked = true;
                        }
                    }
                    
                    // Set email notification preference
                    const emailNotifications = document.getElementById('emailNotifications');
                    if (emailNotifications) {
                        emailNotifications.checked = profileData.emailNotifications !== undefined ? profileData.emailNotifications : true;
                    }
                } else {
                    // If no saved data, reset to default values
                    form.reset();
                }
            }
        }

        // Load profile data on page load
        function loadProfileData() {
            const savedData = localStorage.getItem('profileData');
            if (savedData) {
                const profileData = JSON.parse(savedData);
                
                // Update display elements
                const profileNameElement = document.getElementById('profileName');
                const profileEmailElement = document.getElementById('profileEmail');
                
                if (profileNameElement && profileData.name) {
                    profileNameElement.textContent = profileData.name;
                }
                if (profileEmailElement && profileData.email) {
                    profileEmailElement.textContent = profileData.email;
                }
                
                // Update form fields when available
                if (document.getElementById('editName')) {
                    document.getElementById('editName').value = profileData.name || '';
                }
                if (document.getElementById('editEmail')) {
                    document.getElementById('editEmail').value = profileData.email || '';
                }
                if (document.getElementById('editPhone')) {
                    document.getElementById('editPhone').value = profileData.phone || '';
                }
                if (document.getElementById('editBirthday')) {
                    document.getElementById('editBirthday').value = profileData.birthday || '';
                }
                
                // Set gender radio button
                if (profileData.gender) {
                    const genderRadio = document.querySelector(`input[name="gender"][value="${profileData.gender}"]`);
                    if (genderRadio) {
                        genderRadio.checked = true;
                    }
                }
                
                // Set email notification preference
                const emailNotifications = document.getElementById('emailNotifications');
                if (emailNotifications) {
                    emailNotifications.checked = profileData.emailNotifications !== undefined ? profileData.emailNotifications : true;
                }
            }
        }

        // Theme radio buttons
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved profile data
            loadProfileData();
        });

        // Logout function
        function logout() {
            showSection('loginSection');
        }

        // Initialize profile data
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved profile data or use default
            let profileData = JSON.parse(localStorage.getItem('profileData')) || {
                name: 'Ph·∫°m VƒÉn Gi√†u',
                email: 'nguyenvana@example.com',
                phone: '0123456789',
                birthday: '1990-01-15',
                gender: 'male'
            };

            // Update profile display
            document.getElementById('profileName').textContent = profileData.name;
            document.getElementById('profileEmail').textContent = profileData.email;
            
            // Update form fields
            document.getElementById('editName').value = profileData.name;
            document.getElementById('editEmail').value = profileData.email;
            document.getElementById('editPhone').value = profileData.phone;
            document.getElementById('editBirthday').value = profileData.birthday;
            
            // Set gender radio button
            const genderRadio = document.getElementById(`gender${profileData.gender.charAt(0).toUpperCase() + profileData.gender.slice(1)}`);
            if (genderRadio) {
                genderRadio.checked = true;
            }

            // Update avatar with first letter of name across all tabs
            const firstLetter = profileData.name.charAt(0).toUpperCase();
            syncAvatarAcrossTabs(firstLetter);

            // Set current theme in settings
            const currentTheme = localStorage.getItem('theme') || 'light';
            const themeRadio = document.getElementById(`${currentTheme}Theme`);
            if (themeRadio) {
                themeRadio.checked = true;
            }

            // Initialize orders
            initializeOrders();
        });

        // Orders Management System
        let sampleOrders = [
            {
                id: 'DH001',
                date: '2025-07-20',
                status: 'pending',
                total: 1250000,
                products: [
                    { name: 'Set kem d∆∞·ª°ng da Laneige', quantity: 1, price: 850000, image: 'üß¥' },
                    { name: 'Son m√¥i YSL Rouge Pur Couture', quantity: 1, price: 1200000, image: 'ÔøΩ' },
                    { name: 'N∆∞·ªõc hoa h·ªìng Some By Mi', quantity: 1, price: 450000, image: 'ÔøΩ' }
                ],
                timeline: [
                    { status: 'ƒê·∫∑t h√†ng', date: '2025-07-20 14:30', completed: true },
                    { status: 'Ch·ªù x√°c nh·∫≠n', date: '2025-07-20 14:30', completed: false },
                    { status: 'ƒêang x·ª≠ l√Ω', date: '', completed: false },
                    { status: 'ƒêang giao', date: '', completed: false },
                    { status: 'ƒê√£ giao', date: '', completed: false }
                ]
            },
            {
                id: 'DH002',
                date: '2025-07-18',
                status: 'shipping',
                total: 2800000,
                products: [
                    { name: 'Serum Vitamin C Klairs', quantity: 2, price: 650000, image: '‚ú®' },
                    { name: 'Kem ch·ªëng n·∫Øng La Roche-Posay', quantity: 1, price: 580000, image: '‚òÄÔ∏è' },
                    { name: 'M·∫∑t n·∫° The Ordinary Niacinamide', quantity: 3, price: 320000, image: 'üé≠' }
                ],
                timeline: [
                    { status: 'ƒê·∫∑t h√†ng', date: '2025-07-18 10:15', completed: true },
                    { status: 'Ch·ªù x√°c nh·∫≠n', date: '2025-07-18 11:00', completed: true },
                    { status: 'ƒêang x·ª≠ l√Ω', date: '2025-07-18 16:30', completed: true },
                    { status: 'ƒêang giao', date: '2025-07-19 08:00', completed: true },
                    { status: 'ƒê√£ giao', date: '', completed: false }
                ]
            },
            {
                id: 'DH003',
                date: '2025-07-15',
                status: 'delivered',
                total: 3500000,
                products: [
                    { name: 'B·ªô kit l√†m ƒë·∫πp Sulwhasoo', quantity: 1, price: 2800000, image: 'üéÅ' },
                    { name: 'Ph·∫•n ph·ªß Innisfree No Sebum', quantity: 2, price: 350000, image: 'üåø' }
                ],
                timeline: [
                    { status: 'ƒê·∫∑t h√†ng', date: '2025-07-15 09:20', completed: true },
                    { status: 'Ch·ªù x√°c nh·∫≠n', date: '2025-07-15 10:00', completed: true },
                    { status: 'ƒêang x·ª≠ l√Ω', date: '2025-07-15 14:30', completed: true },
                    { status: 'ƒêang giao', date: '2025-07-16 08:00', completed: true },
                    { status: 'ƒê√£ giao', date: '2025-07-17 16:20', completed: true }
                ]
            },
            {
                id: 'DH004',
                date: '2025-07-22',
                status: 'pending',
                total: 1650000,
                products: [
                    { name: 'S·ªØa r·ª≠a m·∫∑t CeraVe Foaming', quantity: 2, price: 380000, image: 'üßº' },
                    { name: 'Tinh ch·∫•t d∆∞·ª°ng ·∫©m Hada Labo', quantity: 1, price: 520000, image: 'üíß' },
                    { name: 'Mascara Maybelline Lash Sensational', quantity: 1, price: 750000, image: 'ÔøΩÔ∏è' }
                ],
                timeline: [
                    { status: 'ƒê·∫∑t h√†ng', date: '2025-07-22 11:45', completed: true },
                    { status: 'Ch·ªù x√°c nh·∫≠n', date: '2025-07-22 11:45', completed: false },
                    { status: 'ƒêang x·ª≠ l√Ω', date: '', completed: false },
                    { status: 'ƒêang giao', date: '', completed: false },
                    { status: 'ƒê√£ giao', date: '', completed: false }
                ]
            },
            {
                id: 'DH005',
                date: '2025-07-10',
                status: 'delivered',
                total: 2200000,
                products: [
                    { name: 'N∆∞·ªõc t·∫©y trang Bioderma Sensibio', quantity: 1, price: 650000, image: 'üåä' },
                    { name: 'Kem d∆∞·ª°ng m·∫Øt Olay Regenerist', quantity: 1, price: 890000, image: 'üëÄ' },
                    { name: 'Serum Retinol Paula\'s Choice', quantity: 1, price: 1200000, image: 'ÔøΩ' }
                ],
                timeline: [
                    { status: 'ƒê·∫∑t h√†ng', date: '2025-07-10 15:30', completed: true },
                    { status: 'Ch·ªù x√°c nh·∫≠n', date: '2025-07-10 16:00', completed: true },
                    { status: 'ƒêang x·ª≠ l√Ω', date: '2025-07-11 09:00', completed: true },
                    { status: 'ƒêang giao', date: '2025-07-12 08:30', completed: true },
                    { status: 'ƒê√£ giao', date: '2025-07-13 14:15', completed: true }
                ]
            }
        ];
        
        // Bi·∫øn ƒë·ªÉ theo d√µi tr·∫°ng th√°i l·ªçc hi·ªán t·∫°i
        let currentStatusFilter = '';

        function initializeOrders() {
            loadOrders();
            updateOrderStatistics();
        }

        function loadOrders() {
            const ordersList = document.getElementById('ordersList');
            if (!ordersList) return;

            // L·ªçc ƒë∆°n h√†ng theo tr·∫°ng th√°i hi·ªán t·∫°i
            let filteredOrders = sampleOrders;
            if (currentStatusFilter) {
                if (currentStatusFilter === 'shipping') {
                    // Bao g·ªìm c·∫£ 'shipping' v√† 'processing' cho tr·∫°ng th√°i "ƒêang giao"
                    filteredOrders = sampleOrders.filter(order => 
                        order.status === 'shipping' || order.status === 'processing'
                    );
                } else {
                    filteredOrders = sampleOrders.filter(order => order.status === currentStatusFilter);
                }
            }

            if (filteredOrders.length === 0) {
                ordersList.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-inbox display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o</h5>
                        <p class="text-muted">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.</p>
                    </div>
                `;
                return;
            }

            const ordersHTML = filteredOrders.map(order => {
                const statusClass = getStatusClass(order.status);
                const statusText = getStatusText(order.status);
                
                const productsHTML = order.products.map(product => `
                    <div class="product-item">
                        <div class="product-image">${product.image}</div>
                        <div class="flex-grow-1">
                            <h6 class="mb-1">${product.name}</h6>
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">S·ªë l∆∞·ª£ng: ${product.quantity}</span>
                                <span class="fw-bold">${formatCurrency(product.price)}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                return `
                    <div class="order-item">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <h6 class="mb-1">ƒê∆°n h√†ng ${order.id}</h6>
                                <small class="text-muted">
                                    <i class="bi bi-calendar me-1"></i>
                                    ${formatDate(order.date)}
                                </small>
                            </div>
                            <div class="text-end">
                                <span class="order-status ${statusClass}">${statusText}</span>
                                <div class="mt-1">
                                    <span class="fw-bold text-primary">${formatCurrency(order.total)}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-products">
                            <h6 class="mb-2">
                                <i class="bi bi-box me-1"></i>
                                S·∫£n ph·∫©m m·ªπ ph·∫©m (${order.products.length})
                            </h6>
                            ${productsHTML}
                        </div>
                        
                        <div class="mt-3 d-flex gap-2 flex-wrap">
                            <button class="btn btn-sm btn-outline-primary" onclick="viewOrderDetails('${order.id}')">
                                <i class="bi bi-eye me-1"></i>Xem chi ti·∫øt
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="trackOrder('${order.id}')">
                                <i class="bi bi-truck me-1"></i>Theo d√µi
                            </button>
                            ${order.status === 'delivered' ? 
                                '<button class="btn btn-sm btn-outline-warning" onclick="rateOrder(\'' + order.id + '\')"><i class="bi bi-star me-1"></i>ƒê√°nh gi√°</button>' : 
                                ''
                            }
                            ${order.status === 'pending' ? 
                                '<button class="btn btn-sm btn-outline-danger" onclick="cancelOrder(\'' + order.id + '\')"><i class="bi bi-x-circle me-1"></i>H·ªßy ƒë∆°n</button>' : 
                                ''
                            }
                        </div>
                    </div>
                `;
            }).join('');

            ordersList.innerHTML = ordersHTML;
        }

        function updateOrderStatistics() {
            const pending = sampleOrders.filter(order => order.status === 'pending').length;
            const shipping = sampleOrders.filter(order => order.status === 'shipping' || order.status === 'processing').length;
            const delivered = sampleOrders.filter(order => order.status === 'delivered').length;
            const total = sampleOrders.length;

            document.getElementById('pendingCount').textContent = pending;
            document.getElementById('shippingCount').textContent = shipping;
            document.getElementById('deliveredCount').textContent = delivered;
            document.getElementById('totalCount').textContent = total;
        }

        function getStatusClass(status) {
            const statusClasses = {
                'pending': 'status-pending',
                'processing': 'status-processing',
                'shipping': 'status-shipping',
                'delivered': 'status-delivered',
                'cancelled': 'status-cancelled'
            };
            return statusClasses[status] || 'status-pending';
        }

        function getStatusText(status) {
            const statusTexts = {
                'pending': 'Ch·ªù x√°c nh·∫≠n',
                'processing': 'ƒêang x·ª≠ l√Ω',
                'shipping': 'ƒêang giao',
                'delivered': 'ƒê√£ giao',
                'cancelled': 'ƒê√£ h·ªßy'
            };
            return statusTexts[status] || 'Kh√¥ng x√°c ƒë·ªãnh';
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            }).format(amount);
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('vi-VN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function refreshOrders() {
            // Reset filter v·ªÅ "T·∫•t c·∫£"
            currentStatusFilter = '';
            updateStatusFilterDisplay('');
            
            loadOrders();
            updateOrderStatistics();
            showToast('Danh s√°ch ƒë∆°n h√†ng ƒë√£ ƒë∆∞·ª£c l√†m m·ªõi!', 'success');
        }

        function filterOrdersByStatus(status) {
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i l·ªçc hi·ªán t·∫°i
            currentStatusFilter = status;
            
            // C·∫≠p nh·∫≠t giao di·ªán ƒë·ªÉ hi·ªÉn th·ªã tr·∫°ng th√°i ƒëang ƒë∆∞·ª£c l·ªçc
            updateStatusFilterDisplay(status);
            
            // T·∫£i l·∫°i danh s√°ch ƒë∆°n h√†ng v·ªõi filter m·ªõi
            loadOrders();
        }

        function updateStatusFilterDisplay(status) {
            // X√≥a class active kh·ªèi t·∫•t c·∫£ card
            const cards = document.querySelectorAll('.card[onclick*="filterOrdersByStatus"]');
            cards.forEach(card => {
                card.classList.remove('border-warning');
                card.style.transform = '';
                card.style.boxShadow = '';
            });
            
            // Th√™m hi·ªáu ·ª©ng cho card ƒë∆∞·ª£c ch·ªçn
            let selectedCard = null;
            if (status === 'pending') {
                selectedCard = cards[0];
            } else if (status === 'shipping') {
                selectedCard = cards[1];
            } else if (status === 'delivered') {
                selectedCard = cards[2];
            } else {
                selectedCard = cards[3];
            }
            
            if (selectedCard) {
                selectedCard.classList.add('border-warning');
                selectedCard.style.transform = 'scale(1.05)';
                selectedCard.style.boxShadow = '0 4px 12px rgba(255, 193, 7, 0.3)';
                selectedCard.style.transition = 'all 0.3s ease';
            }
        }

        function viewOrderDetails(orderId) {
            const order = sampleOrders.find(o => o.id === orderId);
            if (!order) return;

            const timelineHTML = order.timeline.map(item => `
                <div class="timeline-item ${item.completed ? 'completed' : ''}">
                    <strong>${item.status}</strong>
                    ${item.date ? `<br><small class="text-muted">${item.date}</small>` : ''}
                </div>
            `).join('');

            const modalHTML = `
                <div class="modal fade" id="orderDetailsModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Chi ti·∫øt ƒë∆°n h√†ng ${order.id}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <h6>Th√¥ng tin ƒë∆°n h√†ng</h6>
                                        <p><strong>M√£ ƒë∆°n:</strong> ${order.id}</p>
                                        <p><strong>Ng√†y ƒë·∫∑t:</strong> ${formatDate(order.date)}</p>
                                        <p><strong>Tr·∫°ng th√°i:</strong> <span class="order-status ${getStatusClass(order.status)}">${getStatusText(order.status)}</span></p>
                                        <p><strong>T·ªïng ti·ªÅn:</strong> ${formatCurrency(order.total)}</p>
                                        
                                        <h6 class="mt-4">S·∫£n ph·∫©m</h6>
                                        <div class="order-products">
                                            ${order.products.map(product => `
                                                <div class="product-item">
                                                    <div class="product-image">${product.image}</div>
                                                    <div class="flex-grow-1">
                                                        <h6 class="mb-1">${product.name}</h6>
                                                        <div class="d-flex justify-content-between">
                                                            <span>S·ªë l∆∞·ª£ng: ${product.quantity}</span>
                                                            <span class="fw-bold">${formatCurrency(product.price)}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <h6>Ti·∫øn tr√¨nh ƒë∆°n h√†ng</h6>
                                        <div class="order-timeline">
                                            ${timelineHTML}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                            </div>
                        </div>
                    </div                </div>
            `;

            // Remove existing modal if any
            const existingModal = document.getElementById('orderDetailsModal');
            if (existingModal) {
                existingModal.remove();
            }

            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modal = new bootstrap.Modal(document.getElementById('orderDetailsModal'));
            modal.show();
        }

        function trackOrder(orderId) {
            const order = sampleOrders.find(o => o.id === orderId);
            if (!order) return;

            showToast(`ƒêang theo d√µi ƒë∆°n h√†ng ${orderId}. B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c th√¥ng b√°o khi c√≥ c·∫≠p nh·∫≠t!`, 'info');
            
            // Simulate order status update notification
            setTimeout(() => {
                if (Math.random() > 0.5) {
                    simulateOrderStatusUpdate(orderId);
                }
            }, 5000);
        }

        function simulateOrderStatusUpdate(orderId) {
            const statusUpdates = [
                'ƒê∆°n h√†ng m·ªπ ph·∫©m ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n',
                'C√°c s·∫£n ph·∫©m m·ªπ ph·∫©m ƒëang ƒë∆∞·ª£c ƒë√≥ng g√≥i c·∫©n th·∫≠n',
                'ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c giao cho ƒë∆°n v·ªã v·∫≠n chuy·ªÉn',
                'C√°c s·∫£n ph·∫©m l√†m ƒë·∫πp ƒëang tr√™n ƒë∆∞·ªùng giao ƒë·∫øn b·∫°n',
                'Shipper ƒëang chu·∫©n b·ªã giao h√†ng t·∫≠n n∆°i'
            ];
            
            const randomUpdate = statusUpdates[Math.floor(Math.random() * statusUpdates.length)];
            showOrderNotification(orderId, randomUpdate);
        }

        function showOrderNotification(orderId, message) {
            const notificationHTML = `
                <div class="notification-toast">
                    <div class="toast show bg-primary text-white" role="alert">
                        <div class="toast-header bg-primary text-white">
                            <i class="bi bi-bell-fill me-2"></i>
                            <strong class="me-auto">C·∫≠p nh·∫≠t ƒë∆°n h√†ng</strong>
                            <small>V·ª´a xong</small>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                        </div>
                        <div class="toast-body">
                            <strong>ƒê∆°n h√†ng ${orderId}:</strong><br>
                            ${message}
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', notificationHTML);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                const notification = document.querySelector('.notification-toast');
                if (notification) {
                    notification.remove();
                }
            }, 5000);

            // Simulate email notification
            showToast(`üìß Email th√¥ng b√°o ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn ƒë·ªãa ch·ªâ email c·ªßa b·∫°n`, 'info');
        }

        function rateOrder(orderId) {
            showToast('Ch·ª©c nƒÉng ƒë√°nh gi√° ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn!', 'info');
        }

        function cancelOrder(orderId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën h·ªßy ƒë∆°n h√†ng n√†y?')) {
                const orderIndex = sampleOrders.findIndex(o => o.id === orderId);
                if (orderIndex !== -1) {
                    sampleOrders[orderIndex].status = 'cancelled';
                    loadOrders();
                    updateOrderStatistics();
                    showToast(`ƒê∆°n h√†ng ${orderId} ƒë√£ ƒë∆∞·ª£c h·ªßy th√†nh c√¥ng!`, 'success');
                    
                    // Send email notification
                    showToast(`üìß Email x√°c nh·∫≠n h·ªßy ƒë∆°n ƒë√£ ƒë∆∞·ª£c g·ª≠i`, 'info');
                }
            }
        }

        // Address Management Functions
        let addresses = JSON.parse(localStorage.getItem('userAddresses')) || [];
        let filteredAddresses = addresses;
        let currentFilter = 'all';

        // D·ªØ li·ªáu t·ªânh/qu·∫≠n/ph∆∞·ªùng ƒë·∫ßy ƒë·ªß
        const locationData = {
            "H√† N·ªôi": {
                "Qu·∫≠n Ba ƒê√¨nh": ["Ph∆∞·ªùng Ph√∫c X√°", "Ph∆∞·ªùng Tr√∫c B·∫°ch", "Ph∆∞·ªùng Vƒ©nh Ph√∫c", "Ph∆∞·ªùng C·ªëng V·ªã", "Ph∆∞·ªùng Li·ªÖu Giai", "Ph∆∞·ªùng Nguy·ªÖn Trung Tr·ª±c", "Ph∆∞·ªùng Qu√°n Th√°nh", "Ph∆∞·ªùng Ng·ªçc H√†", "Ph∆∞·ªùng ƒêi·ªán Bi√™n", "Ph∆∞·ªùng ƒê·ªôi C·∫•n", "Ph∆∞·ªùng Ng·ªçc Kh√°nh", "Ph∆∞·ªùng Kim M√£", "Ph∆∞·ªùng Gi·∫£ng V√µ", "Ph∆∞·ªùng Th√†nh C√¥ng"],
                "Qu·∫≠n Ho√†n Ki·∫øm": ["Ph∆∞·ªùng Ph√∫c T·∫•n", "Ph∆∞·ªùng ƒê·ªìng Xu√¢n", "Ph∆∞·ªùng H√†ng M√£", "Ph∆∞·ªùng H√†ng Bu·ªìm", "Ph∆∞·ªùng H√†ng ƒê√†o", "Ph∆∞·ªùng H√†ng B·ªì", "Ph∆∞·ªùng C·ª≠a ƒê√¥ng", "Ph∆∞·ªùng L√Ω Th√°i T·ªï", "Ph∆∞·ªùng H√†ng B·∫°c", "Ph∆∞·ªùng H√†ng Gai", "Ph∆∞·ªùng Ch∆∞∆°ng D∆∞∆°ng ƒê·ªô", "Ph∆∞·ªùng C·ª≠a Nam", "Ph∆∞·ªùng H√†ng Tr·ªëng", "Ph∆∞·ªùng Tr√†ng Ti·ªÅn", "Ph∆∞·ªùng Tr·∫ßn H∆∞ng ƒê·∫°o", "Ph∆∞·ªùng Phan Chu Trinh", "Ph∆∞·ªùng H√†ng B√¥ng", "Ph∆∞·ªùng H√†ng GrƒÉng"],
                "Qu·∫≠n Hai B√† Tr∆∞ng": ["Ph∆∞·ªùng Nguy·ªÖn Du", "Ph∆∞·ªùng B·∫°ch ƒê·∫±ng", "Ph∆∞·ªùng Ph·∫°m ƒê√¨nh H·ªï", "Ph∆∞·ªùng L√™ ƒê·∫°i H√†nh", "Ph∆∞·ªùng ƒê·ªìng Nh√¢n", "Ph∆∞·ªùng Ph·ªë Hu·∫ø", "Ph∆∞·ªùng ƒê·ªëng M√°c", "Ph∆∞·ªùng Thanh L∆∞∆°ng", "Ph∆∞·ªùng Thanh Nh√†n", "Ph∆∞·ªùng C·∫ßu D·ªÅn", "Ph∆∞·ªùng B√°ch Khoa", "Ph∆∞·ªùng ƒê·ªìng T√¢m", "Ph∆∞·ªùng Vƒ©nh Tuy", "Ph∆∞·ªùng B·∫°ch Mai", "Ph∆∞·ªùng Qu·ª≥nh Mai", "Ph∆∞·ªùng Qu·ª≥nh L√¥i", "Ph∆∞·ªùng Minh Khai", "Ph∆∞·ªùng Tr∆∞∆°ng ƒê·ªãnh"],
                "Qu·∫≠n ƒê·ªëng ƒêa": ["Ph∆∞·ªùng C√°t Linh", "Ph∆∞·ªùng VƒÉn Mi·∫øu", "Ph∆∞·ªùng Qu·ªëc T·ª≠ Gi√°m", "Ph∆∞·ªùng L√°ng Th∆∞·ª£ng", "Ph∆∞·ªùng √î Ch·ª£ D·ª´a", "Ph∆∞·ªùng VƒÉn Ch∆∞∆°ng", "Ph∆∞·ªùng H√†ng B·ªôt", "Ph∆∞·ªùng La Th√†nh", "Ph∆∞·ªùng L√°ng H·∫°", "Ph∆∞·ªùng Kh√¢m Thi√™n", "Ph∆∞·ªùng Th·ªï Quan", "Ph∆∞·ªùng Nam ƒê·ªìng", "Ph∆∞·ªùng Trung Ph·ª•ng", "Ph∆∞·ªùng Quang Trung", "Ph∆∞·ªùng Trung Li·ªát", "Ph∆∞·ªùng Ph∆∞∆°ng Li√™n", "Ph∆∞·ªùng Th·ªãnh Quang", "Ph∆∞·ªùng Trung T·ª±", "Ph∆∞·ªùng Kim Li√™n", "Ph∆∞·ªùng Ph∆∞∆°ng Mai", "Ph∆∞·ªùng Ng√£ T∆∞ S·ªü"],
                "Qu·∫≠n T√¢y H·ªì": ["Ph∆∞·ªùng Ph√∫ Th∆∞·ª£ng", "Ph∆∞·ªùng Nh·∫≠t T√¢n", "Ph∆∞·ªùng T·ª© Li√™n", "Ph∆∞·ªùng Qu·∫£ng An", "Ph∆∞·ªùng Xu√¢n La", "Ph∆∞·ªùng Y√™n Ph·ª•", "Ph∆∞·ªùng B∆∞·ªüi", "Ph∆∞·ªùng Th·ª•y Khu√™"],
                "Qu·∫≠n C·∫ßu Gi·∫•y": ["Ph∆∞·ªùng Nghƒ©a ƒê√¥", "Ph∆∞·ªùng Nghƒ©a T√¢n", "Ph∆∞·ªùng Mai D·ªãch", "Ph∆∞·ªùng D·ªãch V·ªçng", "Ph∆∞·ªùng D·ªãch V·ªçng H·∫≠u", "Ph∆∞·ªùng Quan Hoa", "Ph∆∞·ªùng Y√™n H√≤a", "Ph∆∞·ªùng Trung H√≤a"],
                "Qu·∫≠n Thanh Xu√¢n": ["Ph∆∞·ªùng H·∫° ƒê√¨nh", "Ph∆∞·ªùng Thanh Xu√¢n B·∫Øc", "Ph∆∞·ªùng Thanh Xu√¢n Nam", "Ph∆∞·ªùng Kh∆∞∆°ng Th∆∞·ª£ng", "Ph∆∞·ªùng Kh∆∞∆°ng ƒê√¨nh", "Ph∆∞·ªùng Thanh Xu√¢n Trung", "Ph∆∞·ªùng Nh√¢n Ch√≠nh", "Ph∆∞·ªùng Th∆∞·ª£ng ƒê√¨nh", "Ph∆∞·ªùng Kh∆∞∆°ng Mai", "Ph∆∞·ªùng Thanh Xu√¢n T√¢y", "Ph∆∞·ªùng Ph∆∞∆°ng Li·ªát"],
                "Qu·∫≠n Ho√†ng Mai": ["Ph∆∞·ªùng Thanh Tr√¨", "Ph∆∞·ªùng Vƒ©nh H∆∞ng", "Ph∆∞·ªùng ƒê·ªãnh C√¥ng", "Ph∆∞·ªùng Mai ƒê·ªông", "Ph∆∞·ªùng T∆∞∆°ng Mai", "Ph∆∞·ªùng ƒê·∫°i Kim", "Ph∆∞·ªùng T√¢n Mai", "Ph∆∞·ªùng Ho√†ng VƒÉn Th·ª•", "Ph∆∞·ªùng Tr·∫ßn Ph√∫", "Ph∆∞·ªùng Ho√†ng Li·ªát", "Ph∆∞·ªùng Lƒ©nh Nam", "Ph∆∞·ªùng Th·ªãnh Li·ªát", "Ph∆∞·ªùng Ho√†ng Mai", "Ph∆∞·ªùng ƒê√¥ng D∆∞∆°ng"],
                "Qu·∫≠n Long Bi√™n": ["Ph∆∞·ªùng Th∆∞·ª£ng Thanh", "Ph∆∞·ªùng Ng·ªçc Th·ª•y", "Ph∆∞·ªùng Giang Bi√™n", "Ph∆∞·ªùng ƒê·ª©c Giang", "Ph∆∞·ªùng Vi·ªát H∆∞ng", "Ph∆∞·ªùng Gia Th·ª•y", "Ph∆∞·ªùng Ng·ªçc L√¢m", "Ph∆∞·ªùng Ph√∫c L·ª£i", "Ph∆∞·ªùng B·ªì ƒê·ªÅ", "Ph∆∞·ªùng S√†i ƒê·ªìng", "Ph∆∞·ªùng Long Bi√™n", "Ph∆∞·ªùng Th·∫°ch B√†n", "Ph∆∞·ªùng Ph√∫c ƒê·ªìng", "Ph∆∞·ªùng C·ª± Kh·ªëi"],
                "Huy·ªán S√≥c S∆°n": ["Th·ªã tr·∫•n S√≥c S∆°n", "X√£ B·∫Øc S∆°n", "X√£ Minh Tr√≠", "X√£ H·ªìng K·ª≥", "X√£ Nam S∆°n", "X√£ Trung Gi√£", "X√£ T√¢n H∆∞ng", "X√£ Minh Ph√∫", "X√£ Ph√π Linh", "X√£ B·∫Øc Ph√∫", "X√£ T√¢n Minh", "X√£ Quang Ti·∫øn", "X√£ Hi·ªÅn Ninh", "X√£ T√¢n D√¢n", "X√£ Ti√™n D∆∞·ª£c", "X√£ Vi·ªát Long", "X√£ Xu√¢n Giang", "X√£ Mai ƒê√¨nh", "X√£ ƒê·ª©c Ho√†", "X√£ Thanh Xu√¢n", "X√£ ƒê√¥ng Xu√¢n", "X√£ Kim L≈©", "X√£ Ph√∫ C∆∞·ªùng", "X√£ Ph√∫ Minh", "X√£ Ph√π L·ªó", "X√£ Xu√¢n Thu"],
                "Huy·ªán ƒê√¥ng Anh": ["Th·ªã tr·∫•n ƒê√¥ng Anh", "X√£ B·∫Øc H·ªìng", "X√£ C·ªï Loa", "X√£ ƒê·∫°i M·∫°ch", "X√£ D·ª•c T√∫", "X√£ H·∫£i B·ªëi", "X√£ Kim N·ªó", "X√£ Li√™n H√†", "X√£ Mai L√¢m", "X√£ Nam H·ªìng", "X√£ Nguy√™n Kh√™", "X√£ T√†m X√°", "X√£ Th·ª•y L√¢m", "X√£ Uy N·ªó", "X√£ Vƒ©nh Ng·ªçc", "X√£ V√µng La", "X√£ Xu√¢n N·ªôn"],
                "Huy·ªán Gia L√¢m": ["Th·ªã tr·∫•n Tr√¢u Qu·ª≥", "X√£ D∆∞∆°ng X√°", "X√£ ƒêa T·ªën", "X√£ ƒê·∫∑ng X√°", "X√£ Ki√™u K·ªµ", "X√£ L·ªá Chi", "X√£ Ph√π ƒê·ªïng", "X√£ Ph√∫ Th·ªã", "X√£ T√¢n D√¢n", "X√£ VƒÉn ƒê·ª©c", "X√£ Y√™n Vi√™n", "X√£ C·ªï Bi", "X√£ B√°t Tr√†ng", "X√£ Kim Lan"],
                "Huy·ªán Thanh Tr√¨": ["Th·ªã tr·∫•n VƒÉn ƒêi·ªÉn", "X√£ T·ª© Hi·ªáp", "X√£ Tam Hi·ªáp", "X√£ Y√™n M·ªπ", "X√£ Vƒ©nh Qu·ª≥nh", "X√£ Ng≈© Hi·ªáp", "X√£ Duy√™n H√†", "X√£ Li√™n Ninh", "X√£ ƒê·∫°i √Ång", "X√£ H·ªØu Ho√†", "X√£ T·∫£ Thanh Oai", "X√£ Thanh Li·ªát", "X√£ Tam H∆∞ng"],
                "Huy·ªán Ho√†i ƒê·ª©c": ["Th·ªã tr·∫•n Tr·∫°m Tr√¥i", "X√£ An Kh√°nh", "X√£ An Th∆∞·ª£ng", "X√£ C√°t Qu·∫ø", "X√£ Di Tr·∫°ch", "X√£ D∆∞∆°ng Li·ªÖu", "X√£ ƒê·ª©c Th∆∞·ª£ng", "X√£ ƒê·∫Øc S·ªü", "X√£ L·∫°i Y√™n", "X√£ L√™ L·ª£i", "X√£ Minh Khai", "X√£ Ph∆∞∆°ng ƒê√¨nh", "X√£ S∆°n ƒê·ªìng", "X√£ V√¢n Canh", "X√£ V√¢n C√¥n"],
                "Huy·ªán Thanh Oai": ["Th·ªã tr·∫•n Kim B√†i", "X√£ B√≠ch H√≤a", "X√£ B√¨nh Minh", "X√£ Cao Vi√™n", "X√£ C·ª± Kh√™", "X√£ D√¢n H√≤a", "X√£ Kim An", "X√£ Li√™n Ch√¢u", "X√£ M·ªπ H∆∞ng", "X√£ Ph∆∞∆°ng Trung", "X√£ Tam H∆∞ng", "X√£ Thanh Mai", "X√£ Thanh Th√πy", "X√£ T√¢n ∆†i"],
                "Huy·ªán ·ª®ng H√≤a": ["Th·ªã tr·∫•n V√¢n ƒê√¨nh", "X√£ Cao Th√†nh", "X√£ Cao Vi√™n", "X√£ ƒê·ªìng T√¢m", "X√£ H√≤a L√¢m", "X√£ H√≤a Nam", "X√£ H√≤a Ph√∫", "X√£ Li√™n B·∫°t", "X√£ L∆∞u Ho√†ng", "X√£ Minh ƒê·ª©c", "X√£ Ph∆∞∆°ng T√∫", "X√£ Qu·∫£ng Ph√∫ C·∫ßu", "X√£ T·∫£o D∆∞∆°ng VƒÉn", "X√£ Tr·∫ßm L·ªông", "X√£ Trung T√∫"],
                "Huy·ªán M·ªπ ƒê·ª©c": ["Th·ªã tr·∫•n ƒê·∫°i Nghƒ©a", "X√£ An M·ªπ", "X√£ An Ti·∫øn", "X√£ B·ªôt Xuy√™n", "X√£ ƒê·ªìng T√¢m", "X√£ H·ª£p Ti·∫øn", "X√£ H·ª£p Thanh", "X√£ H∆∞∆°ng S∆°n", "X√£ L√™ Thanh", "X√£ M·ªπ Th√†nh", "X√£ Ph√πng X√°", "X√£ T√¢n D√¢n", "X√£ Th∆∞·ª£ng L√¢m", "X√£ Tuy Lai", "X√£ V·∫°n Kim"],
                "Huy·ªán Ph√∫ Xuy√™n": ["Th·ªã tr·∫•n Ph√∫ Minh", "X√£ B·∫°ch H·∫°", "X√£ Ch√¢u Can", "X√£ ƒê·∫°i Th·∫Øng", "X√£ ƒê·∫°i Xuy√™n", "X√£ H·ªìng Minh", "X√£ H√≤a Nam", "X√£ H√≤a Ph√∫", "X√£ Minh T√¢n", "X√£ Ph√∫ T√∫c", "X√£ Ph√∫ Y√™n", "X√£ Quang L√£ng", "X√£ S∆°n H√†", "X√£ Tri Th·ªßy"],
                "Huy·ªán Th∆∞·ªùng T√≠n": ["Th·ªã tr·∫•n Th∆∞·ªùng T√≠n", "X√£ An Ti·∫øn", "X√£ B√¨nh Minh", "X√£ D≈©ng Ti·∫øn", "X√£ H√† H·ªìi", "X√£ H√≤a B√¨nh", "X√£ H√≤a H·∫≠u", "X√£ H√≤a Ph√∫", "X√£ Li√™n Ch√¢u", "X√£ Ninh S·ªü", "X√£ Qu·∫•t ƒê·ªông", "X√£ T·ª± Nhi√™n", "X√£ VƒÉn B√¨nh", "X√£ VƒÉn T·ª±", "X√£ V·∫°n ƒêi·ªÉm"],
                "Huy·ªán Ba V√¨": ["Th·ªã tr·∫•n T√¢y ƒê·∫±ng", "X√£ Ba Tr·∫°i", "X√£ C·∫©m Lƒ©nh", "X√£ Cam Th∆∞·ª£ng", "X√£ Chu Minh", "X√£ ƒê·ªìng Th√°i", "X√£ ƒê√¥ng Quang", "X√£ Kh√°nh Th∆∞·ª£ng", "X√£ Minh Quang", "X√£ Ph√∫ S∆°n", "X√£ Ph√∫ C∆∞·ªùng", "X√£ Ph√∫ ƒê√¥ng", "X√£ Ph√∫ Ch√¢u", "X√£ T·∫£n Lƒ©nh", "X√£ T·∫£n H·ªìng", "X√£ T·∫£n Vi√™n"],
                "Huy·ªán Ch∆∞∆°ng M·ªπ": ["Th·ªã tr·∫•n Ch√∫c S∆°n", "X√£ B·∫Øc S∆°n", "X√£ B·ªôt Xuy√™n", "X√£ Cao D∆∞∆°ng", "X√£ C·∫©m Lƒ©nh", "X√£ ƒê·ªìng Ph√∫", "X√£ ƒê√¥ng Ph∆∞∆°ng Y√™n", "X√£ H√≤a Ch√≠nh", "X√£ H√≤a S∆°n", "X√£ H·ª£p ƒê·ªìng", "X√£ H·ªØu VƒÉn", "X√£ Lam ƒêi·ªÅn", "X√£ Nam Ph∆∞∆°ng Ti·∫øn", "X√£ Ph√∫ Nghƒ©a", "X√£ Ph·ª•ng Ch√¢u", "X√£ T·ªët ƒê·ªông"],
                "Huy·ªán Qu·ªëc Oai": ["Th·ªã tr·∫•n Qu·ªëc Oai", "X√£ C·∫•n H·ªØu", "X√£ C·ªông H√≤a", "X√£ ƒê·ªìng Quang", "X√£ ƒê√¥ng Y√™n", "X√£ H√≤a Th·∫°ch", "X√£ H·ª£p ƒê·ªìng", "X√£ Li·ªáp Tuy·∫øt", "X√£ Nghƒ©a H∆∞∆°ng", "X√£ Ng·ªçc Li·ªáp", "X√£ Ph√∫ C√°t", "X√£ Ph√∫ M√£n"],
                "Huy·ªán Th·∫°ch Th·∫•t": ["Th·ªã tr·∫•n Li√™n Quan", "X√£ B√¨nh Ph√∫", "X√£ C·∫©m Y√™n", "X√£ Ch√†ng S∆°n", "X√£ ƒê·∫°i ƒê·ªìng", "X√£ ƒê·ªìng Tr√∫c", "X√£ H·∫° B·∫±ng", "X√£ H∆∞∆°ng Ng·∫£i", "X√£ L·∫°i Y√™n", "X√£ Ph√πng X√°", "X√£ Ti·∫øn Xu√¢n", "X√£ T√¢n X√£", "X√£ Th·∫°ch H√≤a", "X√£ Th·∫°ch X√°", "X√£ Y√™n B√¨nh"],
                "Huy·ªán M√™ Linh": ["Th·ªã tr·∫•n Quang Minh", "X√£ Chu Phan", "X√£ ƒê·∫°i Th·ªãnh", "X√£ Kim Hoa", "X√£ Li√™n M·∫°c", "X√£ M√™ Linh", "X√£ Tam ƒê·ªìng", "X√£ Ti·∫øn Th·∫Øng", "X√£ Ti·∫øn Xu√¢n", "X√£ Thanh L√¢m", "X√£ Thanh V√¢n"],
                "Huy·ªán S∆°n T√¢y": ["Ph∆∞·ªùng Quang Trung", "Ph∆∞·ªùng L√™ L·ª£i", "Ph∆∞·ªùng Trung H∆∞ng", "Ph∆∞·ªùng Vi√™n S∆°n", "Ph∆∞·ªùng Xu√¢n Khanh", "X√£ C·ªï ƒê√¥ng", "X√£ ƒê∆∞·ªùng L√¢m", "X√£ Kim S∆°n", "X√£ Thanh M·ªπ", "X√£ T√≤ng B·∫°t"],
                "Huy·ªán Ph√∫c Th·ªç": ["Th·ªã tr·∫•n Ph√∫c Th·ªç", "X√£ C·∫©m ƒê√¨nh", "X√£ H√°t M√¥n", "X√£ Hi·ªáp Thu·∫≠n", "X√£ Li√™n H·ªìng", "X√£ Long Xuy√™n", "X√£ Ng·ªçc T·∫£o", "X√£ Ph·ª•ng Th∆∞·ª£ng", "X√£ Sen Chi·ªÉu", "X√£ Tam Hi·ªáp", "X√£ T√≠ch Giang", "X√£ T√≠ch S∆°n", "X√£ V√¢n H√†"],
                "Huy·ªán ƒêan Ph∆∞·ª£ng": ["Th·ªã tr·∫•n Ph√πng", "X√£ C√°t Qu·∫ø", "X√£ ƒêan Ph∆∞·ª£ng", "X√£ ƒê·ªìng Th√°p", "X√£ H·∫° M·ªó", "X√£ Li√™n H√†", "X√£ Li√™n H·ªìng", "X√£ Ph∆∞∆°ng ƒê√¨nh", "X√£ T√¢n H·ªôi", "X√£ T√¢n L·∫≠p", "X√£ Th·ªç An", "X√£ Trung Ch√¢u"],
                "Th·ªã x√£ S∆°n T√¢y": ["Ph∆∞·ªùng Quang Trung", "Ph∆∞·ªùng L√™ L·ª£i", "Ph∆∞·ªùng Trung H∆∞ng", "Ph∆∞·ªùng Vi√™n S∆°n", "Ph∆∞·ªùng Xu√¢n Khanh", "X√£ C·ªï ƒê√¥ng", "X√£ ƒê∆∞·ªùng L√¢m", "X√£ Kim S∆°n", "X√£ Thanh M·ªπ", "X√£ T√≤ng B·∫°t"],
                "Th·ªã x√£ Ph√∫c Th·ªç": ["Th·ªã tr·∫•n Ph√∫c Th·ªç", "X√£ C·∫©m ƒê√¨nh", "X√£ H√°t M√¥n", "X√£ Hi·ªáp Thu·∫≠n", "X√£ Li√™n H·ªìng", "X√£ Long Xuy√™n", "X√£ Ng·ªçc T·∫£o", "X√£ Ph·ª•ng Th∆∞·ª£ng", "X√£ Sen Chi·ªÉu", "X√£ Tam Hi·ªáp", "X√£ T√≠ch Giang", "X√£ T√≠ch S∆°n", "X√£ V√¢n H√†"]
            },
            "TP. H·ªì Ch√≠ Minh": {
                "Qu·∫≠n 1": ["Ph∆∞·ªùng T√¢n ƒê·ªãnh", "Ph∆∞·ªùng ƒêa Kao", "Ph∆∞·ªùng B·∫øn Ngh√©", "Ph∆∞·ªùng B·∫øn Th√†nh", "Ph∆∞·ªùng Nguy·ªÖn Th√°i B√¨nh", "Ph∆∞·ªùng Ph·∫°m Ng≈© L√£o", "Ph∆∞·ªùng C·∫ßu √îng L√£nh", "Ph∆∞·ªùng C√¥ Giang", "Ph∆∞·ªùng Nguy·ªÖn C∆∞ Trinh", "Ph∆∞·ªùng C·∫ßu Kho"],
                "Qu·∫≠n 2": ["Ph∆∞·ªùng Th·∫£o ƒêi·ªÅn", "Ph∆∞·ªùng An Ph√∫", "Ph∆∞·ªùng An Kh√°nh", "Ph∆∞·ªùng B√¨nh An", "Ph∆∞·ªùng B√¨nh Tr∆∞ng ƒê√¥ng", "Ph∆∞·ªùng B√¨nh Tr∆∞ng T√¢y", "Ph∆∞·ªùng C√°t L√°i", "Ph∆∞·ªùng Th·∫°nh M·ªπ L·ª£i", "Ph∆∞·ªùng An L·ª£i ƒê√¥ng", "Ph∆∞·ªùng Th·ªß Thi√™m"],
                "Qu·∫≠n 3": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14"],
                "Qu·∫≠n 4": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15", "Ph∆∞·ªùng 16", "Ph∆∞·ªùng 18"],
                "Qu·∫≠n 5": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15"],
                "Qu·∫≠n 6": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14"],
                "Qu·∫≠n 7": ["Ph∆∞·ªùng T√¢n Thu·∫≠n ƒê√¥ng", "Ph∆∞·ªùng T√¢n Thu·∫≠n T√¢y", "Ph∆∞·ªùng T√¢n Ki·ªÉng", "Ph∆∞·ªùng T√¢n H∆∞ng", "Ph∆∞·ªùng B√¨nh Thu·∫≠n", "Ph∆∞·ªùng T√¢n Quy", "Ph∆∞·ªùng Ph√∫ Thu·∫≠n", "Ph∆∞·ªùng T√¢n Ph√∫", "Ph∆∞·ªùng T√¢n Phong", "Ph∆∞·ªùng Ph√∫ M·ªπ"],
                "Qu·∫≠n 8": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15", "Ph∆∞·ªùng 16"],
                "Qu·∫≠n 9": ["Ph∆∞·ªùng Long B√¨nh", "Ph∆∞·ªùng Long Th·∫°nh M·ªπ", "Ph∆∞·ªùng T√¢n Ph√∫", "Ph∆∞·ªùng Hi·ªáp Ph√∫", "Ph∆∞·ªùng TƒÉng Nh∆°n Ph√∫ A", "Ph∆∞·ªùng TƒÉng Nh∆°n Ph√∫ B", "Ph∆∞·ªùng Ph∆∞·ªõc Long A", "Ph∆∞·ªùng Ph∆∞·ªõc Long B", "Ph∆∞·ªùng Tr∆∞·ªùng Th·∫°nh", "Ph∆∞·ªùng Long Ph∆∞·ªõc", "Ph∆∞·ªùng Long Tr∆∞·ªùng", "Ph∆∞·ªùng Ph∆∞·ªõc B√¨nh", "Ph∆∞·ªùng Ph√∫ H·ªØu"],
                "Qu·∫≠n 10": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15"],
                "Qu·∫≠n 11": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15", "Ph∆∞·ªùng 16"],
                "Qu·∫≠n 12": ["Ph∆∞·ªùng An Ph√∫ ƒê√¥ng", "Ph∆∞·ªùng ƒê√¥ng H∆∞ng Thu·∫≠n", "Ph∆∞·ªùng Hi·ªáp Th√†nh", "Ph∆∞·ªùng T√¢n Ch√°nh Hi·ªáp", "Ph∆∞·ªùng T√¢n H∆∞ng Thu·∫≠n", "Ph∆∞·ªùng T√¢n Th·ªõi Hi·ªáp", "Ph∆∞·ªùng T√¢n Th·ªõi Nh·∫•t", "Ph∆∞·ªùng Th·∫°nh L·ªôc", "Ph∆∞·ªùng Th·∫°nh Xu√¢n", "Ph∆∞·ªùng Th·ªõi An", "Ph∆∞·ªùng Trung M·ªπ T√¢y"],
                "Qu·∫≠n B√¨nh Th·∫°nh": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15", "Ph∆∞·ªùng 17", "Ph∆∞·ªùng 19", "Ph∆∞·ªùng 21", "Ph∆∞·ªùng 22", "Ph∆∞·ªùng 24", "Ph∆∞·ªùng 25", "Ph∆∞·ªùng 26", "Ph∆∞·ªùng 27", "Ph∆∞·ªùng 28"],
                "Qu·∫≠n G√≤ V·∫•p": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15", "Ph∆∞·ªùng 16", "Ph∆∞·ªùng 17"],
                "Qu·∫≠n Ph√∫ Nhu·∫≠n": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 15", "Ph∆∞·ªùng 17"],
                "Qu·∫≠n T√¢n B√¨nh": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 6", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng 13", "Ph∆∞·ªùng 14", "Ph∆∞·ªùng 15"],
                "Qu·∫≠n T√¢n Ph√∫": ["Ph∆∞·ªùng T√¢n S∆°n Nh√¨", "Ph∆∞·ªùng T√¢y Th·∫°nh", "Ph∆∞·ªùng S∆°n K·ª≥", "Ph∆∞·ªùng T√¢n Qu√Ω", "Ph∆∞·ªùng T√¢n Th√†nh", "Ph∆∞·ªùng Ph√∫ Th·ªç H√≤a", "Ph∆∞·ªùng Ph√∫ Th·∫°nh", "Ph∆∞·ªùng Ph√∫ Trung", "Ph∆∞·ªùng H√≤a Th·∫°nh", "Ph∆∞·ªùng Hi·ªáp T√¢n", "Ph∆∞·ªùng T√¢n Th·ªõi H√≤a"],
                "Qu·∫≠n Th·ªß ƒê·ª©c": ["Ph∆∞·ªùng Linh Xu√¢n", "Ph∆∞·ªùng B√¨nh Chi·ªÉu", "Ph∆∞·ªùng Linh Trung", "Ph∆∞·ªùng Tam B√¨nh", "Ph∆∞·ªùng Tam Ph√∫", "Ph∆∞·ªùng Hi·ªáp B√¨nh Ph∆∞·ªõc", "Ph∆∞·ªùng Hi·ªáp B√¨nh Ch√°nh", "Ph∆∞·ªùng Linh Chi·ªÉu", "Ph∆∞·ªùng Linh T√¢y", "Ph∆∞·ªùng Linh ƒê√¥ng", "Ph∆∞·ªùng B√¨nh Th·ªç", "Ph∆∞·ªùng Tr∆∞·ªùng Th·ªç"]
            },
            "ƒê√† N·∫µng": {
                "Qu·∫≠n H·∫£i Ch√¢u": ["Ph∆∞·ªùng Th·∫°ch Thang", "Ph∆∞·ªùng H·∫£i Ch√¢u I", "Ph∆∞·ªùng H·∫£i Ch√¢u II", "Ph∆∞·ªùng Ph∆∞·ªõc Ninh", "Ph∆∞·ªùng H√≤a Thu·∫≠n T√¢y", "Ph∆∞·ªùng H√≤a Thu·∫≠n ƒê√¥ng", "Ph∆∞·ªùng Nam D∆∞∆°ng", "Ph∆∞·ªùng B√¨nh Hi√™n", "Ph∆∞·ªùng B√¨nh Thu·∫≠n", "Ph∆∞·ªùng H√≤a C∆∞·ªùng B·∫Øc", "Ph∆∞·ªùng H√≤a C∆∞·ªùng Nam", "Ph∆∞·ªùng Thanh B√¨nh", "Ph∆∞·ªùng Thu·∫≠n Ph∆∞·ªõc"],
                "Qu·∫≠n Thanh Kh√™": ["Ph∆∞·ªùng Thanh Kh√™ T√¢y", "Ph∆∞·ªùng Thanh Kh√™ ƒê√¥ng", "Ph∆∞·ªùng Xu√¢n H√†", "Ph∆∞·ªùng T√¢n Ch√≠nh", "Ph∆∞·ªùng Ch√≠nh Gi√°n", "Ph∆∞·ªùng Vƒ©nh Trung", "Ph∆∞·ªùng Th·∫°c Gi√°n", "Ph∆∞·ªùng An Kh√™", "Ph∆∞·ªùng H√≤a Kh√™", "Ph∆∞·ªùng Tam Thu·∫≠n"],
                "Qu·∫≠n S∆°n Tr√†": ["Ph∆∞·ªùng Th·ªç Quang", "Ph∆∞·ªùng N·∫°i Hi√™n ƒê√¥ng", "Ph∆∞·ªùng M√¢n Th√°i", "Ph∆∞·ªùng An H·∫£i B·∫Øc", "Ph∆∞·ªùng Ph∆∞·ªõc M·ªπ", "Ph∆∞·ªùng An H·∫£i T√¢y", "Ph∆∞·ªùng An H·∫£i ƒê√¥ng"],
                "Qu·∫≠n Ng≈© H√†nh S∆°n": ["Ph∆∞·ªùng M·ªπ An", "Ph∆∞·ªùng Khu√™ M·ªπ", "Ph∆∞·ªùng Ho√† H·∫£i", "Ph∆∞·ªùng Ho√† Qu√Ω", "Ph∆∞·ªùng M·ªπ Kh√™"],
                "Qu·∫≠n Li√™n Chi·ªÉu": ["Ph∆∞·ªùng H√≤a Hi·ªáp Nam", "Ph∆∞·ªùng H√≤a Hi·ªáp B·∫Øc", "Ph∆∞·ªùng H√≤a Kh√°nh Nam", "Ph∆∞·ªùng H√≤a Kh√°nh B·∫Øc", "Ph∆∞·ªùng H√≤a Minh"],
                "Qu·∫≠n C·∫©m L·ªá": ["Ph∆∞·ªùng Khu√™ Trung", "Ph∆∞·ªùng H√≤a Ph√°t", "Ph∆∞·ªùng H√≤a An", "Ph∆∞·ªùng H√≤a Th·ªç T√¢y", "Ph∆∞·ªùng H√≤a Th·ªç ƒê√¥ng"]
            },
            "H·∫£i Ph√≤ng": {
                "Qu·∫≠n H·ªìng B√†ng": ["Ph∆∞·ªùng Qu√°n Toan", "Ph∆∞·ªùng H√πng V∆∞∆°ng", "Ph∆∞·ªùng S·ªü D·∫ßu", "Ph∆∞·ªùng Th∆∞·ª£ng L√Ω", "Ph∆∞·ªùng H·∫° L√Ω", "Ph∆∞·ªùng Minh Khai", "Ph∆∞·ªùng Tr·∫°i Cau", "Ph∆∞·ªùng Ho√†ng VƒÉn Th·ª•", "Ph∆∞·ªùng Phan B·ªôi Ch√¢u"],
                "Qu·∫≠n L√™ Ch√¢n": ["Ph∆∞·ªùng C√°t D√†i", "Ph∆∞·ªùng An Bi√™n", "Ph∆∞·ªùng Lam S∆°n", "Ph∆∞·ªùng An D∆∞∆°ng", "Ph∆∞·ªùng Tr·∫ßn Nguy√™n H√£n", "Ph∆∞·ªùng Ni·ªám Nghƒ©a", "Ph∆∞·ªùng D∆∞ H√†ng", "Ph∆∞·ªùng K√™nh D∆∞∆°ng", "Ph∆∞·ªùng ƒê√¥ng H·∫£i", "Ph∆∞·ªùng C√°t Bi", "Ph∆∞·ªùng Tr√†ng C√°t", "Ph∆∞·ªùng ƒê·∫±ng L√¢m", "Ph∆∞·ªùng H·∫£i T√¢n", "Ph∆∞·ªùng Tr√†ng Minh"],
                "Qu·∫≠n Ng√¥ Quy·ªÅn": ["Ph∆∞·ªùng M√°y Chai", "Ph∆∞·ªùng M√°y T∆°", "Ph∆∞·ªùng V·∫°n M·ªπ", "Ph∆∞·ªùng C·∫ßu Tre", "Ph∆∞·ªùng L·∫°c Vi√™n", "Ph∆∞·ªùng C·∫ßu ƒê·∫•t", "Ph∆∞·ªùng Gia Vi√™n", "Ph∆∞·ªùng ƒê√¥ng Kh√™", "Ph∆∞·ªùng L√™ L·ª£i", "Ph∆∞·ªùng ƒê·∫±ng Giang", "Ph∆∞·ªùng ƒê·ªïng Qu·ªëc B√¨nh"],
                "Qu·∫≠n Ki·∫øn An": ["Ph∆∞·ªùng Qu√°n Tr·ªØ", "Ph∆∞·ªùng L·∫°i Xu√¢n", "Ph∆∞·ªùng Ho√†ng Di·ªáu", "Ph∆∞·ªùng Tr·∫ßn Th√†nh Ng·ªç", "Ph∆∞·ªùng VƒÉn ƒê·∫©u", "Ph∆∞·ªùng B·∫Øc S∆°n", "Ph∆∞·ªùng Tr√†ng Kenh", "Ph∆∞·ªùng ƒê·ªìng Ho√†", "Ph∆∞·ªùng B·∫øn Ngh√©"]
            },
            "C·∫ßn Th∆°": {
                "Qu·∫≠n Ninh Ki·ªÅu": ["Ph∆∞·ªùng C√°i Kh·∫ø", "Ph∆∞·ªùng An Ph√∫", "Ph∆∞·ªùng T√¢n An", "Ph∆∞·ªùng An Kh√°nh", "Ph∆∞·ªùng An C∆∞", "Ph∆∞·ªùng H∆∞ng L·ª£i", "Ph∆∞·ªùng An Ho√†", "Ph∆∞·ªùng Th·ªõi B√¨nh", "Ph∆∞·ªùng An Nghi·ªáp", "Ph∆∞·ªùng An C∆∞", "Ph∆∞·ªùng Xu√¢n Kh√°nh"],
                "Qu·∫≠n B√¨nh Thu·ª∑": ["Ph∆∞·ªùng B√¨nh Thu·ª∑", "Ph∆∞·ªùng Tr√† An", "Ph∆∞·ªùng Tr√† N√≥c", "Ph∆∞·ªùng Th·ªõi An ƒê√¥ng", "Ph∆∞·ªùng An Th·ªõi", "Ph∆∞·ªùng B√πi H·ªØu Nghƒ©a", "Ph∆∞·ªùng Long H√≤a", "Ph∆∞·ªùng Long Tuy·ªÅn"],
                "Qu·∫≠n C√°i RƒÉng": ["Ph∆∞·ªùng L√™ B√¨nh", "Ph∆∞·ªùng H∆∞ng Ph√∫", "Ph∆∞·ªùng H∆∞ng Th·∫°nh", "Ph∆∞·ªùng Ba L√°ng", "Ph∆∞·ªùng Th∆∞·ªùng Th·∫°nh", "Ph∆∞·ªùng Ph√∫ Th·ª©", "Ph∆∞·ªùng T√¢n Ph√∫", "Ph∆∞·ªùng Thu·∫≠n An", "Ph∆∞·ªùng Thu·∫≠n H∆∞ng"],
                "Qu·∫≠n √î M√¥n": ["Ph∆∞·ªùng Ch√¢u VƒÉn Li√™m", "Ph∆∞·ªùng √î M√¥n", "Ph∆∞·ªùng Th·ªõi H√≤a", "Ph∆∞·ªùng Th·ªõi Long", "Ph∆∞·ªùng Th·ªõi An", "Ph∆∞·ªùng Ph∆∞·ªõc Th·ªõi", "Ph∆∞·ªùng Tr∆∞·ªùng L·∫°c"],
                "Qu·∫≠n Th·ªët N·ªët": ["Ph∆∞·ªùng Th·ªët N·ªët", "Ph∆∞·ªùng Thu·∫≠n H∆∞ng", "Ph∆∞·ªùng T√¢n L·ªôc", "Ph∆∞·ªùng Thu·∫≠n An", "Ph∆∞·ªùng Trung Nh·ª©t", "Ph∆∞·ªùng Th·∫°nh Ho√†", "Ph∆∞·ªùng Trung Ki√™n", "Ph∆∞·ªùng T√¢n H∆∞ng", "Ph∆∞·ªùng Thu·ª∑ Li√™m", "Ph∆∞·ªùng Trung Th√†nh"]
            },
            "An Giang": {
                "TP. Long Xuy√™n": ["Ph∆∞·ªùng M·ªπ B√¨nh", "Ph∆∞·ªùng M·ªπ Long", "Ph∆∞·ªùng M·ªπ Xuy√™n", "Ph∆∞·ªùng M·ªπ Th·ªõi", "Ph∆∞·ªùng M·ªπ Qu√Ω", "Ph∆∞·ªùng M·ªπ Ph∆∞·ªõc", "Ph∆∞·ªùng M·ªπ Th·∫°nh", "Ph∆∞·ªùng M·ªπ H√≤a", "Ph∆∞·ªùng ƒê√¥ng Xuy√™n", "Ph∆∞·ªùng B√¨nh ƒê·ª©c", "Ph∆∞·ªùng B√¨nh Kh√°nh"],
                "TP. Ch√¢u ƒê·ªëc": ["Ph∆∞·ªùng Ch√¢u Ph√∫ B", "Ph∆∞·ªùng Ch√¢u Ph√∫ A", "Ph∆∞·ªùng Vƒ©nh M·ªπ", "Ph∆∞·ªùng N√∫i Sam", "Ph∆∞·ªùng Vƒ©nh Ngu∆°n", "Ph∆∞·ªùng Ch√¢u Ph√∫", "Ph∆∞·ªùng N√¥ng Th√¥n", "Ph∆∞·ªùng Vƒ©nh T·∫ø"],
                "Huy·ªán An Ph√∫": ["Th·ªã tr·∫•n An Ph√∫", "X√£ Kh√°nh An", "X√£ Qu·ªëc Th√°i", "X√£ Nh∆°n H·ªôi", "X√£ Ph√∫ H·ªØu", "X√£ Ph√∫ H·ªôi", "X√£ Ph∆∞·ªõc H∆∞ng", "X√£ Vƒ©nh L·ªôc", "X√£ Vƒ©nh H·∫≠u", "X√£ ƒêa Ph∆∞·ªõc"],
                "Huy·ªán T√¢n Ch√¢u": ["Th·ªã tr·∫•n T√¢n Ch√¢u", "X√£ Long Th·∫°nh", "X√£ Ph√∫ L·ªôc", "X√£ T√¢n Th·∫°nh", "X√£ T√¢n An", "X√£ Long An", "X√£ Ph√∫ Th·∫°nh", "X√£ Ph√∫ Vƒ©nh", "X√£ L√™ Ch√°nh", "X√£ T√¢n H√≤a"]
            },
            "B√† R·ªãa - V≈©ng T√†u": {
                "TP. V≈©ng T√†u": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng 7", "Ph∆∞·ªùng 8", "Ph∆∞·ªùng 9", "Ph∆∞·ªùng 10", "Ph∆∞·ªùng 11", "Ph∆∞·ªùng 12", "Ph∆∞·ªùng Th·∫Øng Tam", "Ph∆∞·ªùng Th·∫Øng Nh√¨", "Ph∆∞·ªùng R·∫°ch D·ª´a", "Ph∆∞·ªùng Nguy·ªÖn An Ninh"],
                "TP. B√† R·ªãa": ["Ph∆∞·ªùng 1", "Ph∆∞·ªùng 2", "Ph∆∞·ªùng 3", "Ph∆∞·ªùng 4", "Ph∆∞·ªùng 5", "Ph∆∞·ªùng Kim Dinh", "Ph∆∞·ªùng Long H∆∞∆°ng", "Ph∆∞·ªùng Long T√¢m", "Ph∆∞·ªùng Long To√†n", "Ph∆∞·ªùng Ph∆∞·ªõc Hi·ªáp", "Ph∆∞·ªùng Ph∆∞·ªõc Trung"],
                "Huy·ªán C√¥n ƒê·∫£o": ["Th·ªã tr·∫•n C√¥n ƒê·∫£o"],
                "Huy·ªán Xuy√™n M·ªôc": ["Th·ªã tr·∫•n Ph∆∞·ªõc B·ª≠u", "X√£ Ph∆∞·ªõc Thu·∫≠n", "X√£ Xu√¢n S∆°n", "X√£ B√¥ng Trang", "X√£ B∆∞ng Ri·ªÅng", "X√£ Xuy√™n M·ªôc", "X√£ T√¢n L√¢m", "X√£ B·∫£o Ninh", "X√£ H√≤a B√¨nh"]
            },
            "B·∫Øc Giang": {
                "TP. B·∫Øc Giang": ["Ph∆∞·ªùng Th·ªç X∆∞∆°ng", "Ph∆∞·ªùng Tr·∫ßn Nguy√™n H√£n", "Ph∆∞·ªùng Ng√¥ Quy·ªÅn", "Ph∆∞·ªùng Ho√†ng VƒÉn Th·ª•", "Ph∆∞·ªùng Tr∆∞ng V∆∞∆°ng", "Ph∆∞·ªùng L√™ L·ª£i", "Ph∆∞·ªùng Song Mai", "Ph∆∞·ªùng X∆∞∆°ng Giang", "Ph∆∞·ªùng Dƒ©nh K·∫ø", "Ph∆∞·ªùng T√¢n Ti·∫øn"],
                "Huy·ªán Y√™n Th·∫ø": ["Th·ªã tr·∫•n Ph·ªìn X∆∞∆°ng", "X√£ L√£o H·ªô", "X√£ Lan M·∫´u", "X√£ Y√™n ƒê·ªãnh", "X√£ T√¢n Ti·∫øn", "X√£ Canh N·∫≠u", "X√£ Xu√¢n L∆∞∆°ng", "X√£ Tam Ti·∫øn", "X√£ ƒê·ªìng V∆∞∆°ng", "X√£ ƒê·ªìng Vi·ªát"],
                "Huy·ªán T√¢n Y√™n": ["Th·ªã tr·∫•n Cao Th∆∞·ª£ng", "X√£ Ph√∫c S∆°n", "X√£ L∆∞∆°ng Phong", "X√£ Nh√£ Nam", "X√£ Nh√£ L·ªông", "X√£ Lam C·ªët", "X√£ Y√™n L∆∞", "X√£ B·ªë H·∫°", "X√£ ƒê·∫°i H√≥a", "X√£ H∆∞∆°ng Gi√°n"]
            },
            "B·∫Øc Ninh": {
                "TP. B·∫Øc Ninh": ["Ph∆∞·ªùng V≈© Ninh", "Ph∆∞·ªùng ƒê√°p C·∫ßu", "Ph∆∞·ªùng Th·ªã C·∫ßu", "Ph∆∞·ªùng Kinh B·∫Øc", "Ph∆∞·ªùng V·ªá An", "Ph∆∞·ªùng Ninh X√°", "Ph∆∞·ªùng Su·ªëi Hoa", "Ph∆∞·ªùng ƒê·∫°i Ph√∫c", "Ph∆∞·ªùng Kh√∫c Xuy√™n", "Ph∆∞·ªùng V√µ C∆∞·ªùng"],
                "Huy·ªán Y√™n Phong": ["Th·ªã tr·∫•n Ch·ªù", "X√£ Y√™n Phong", "X√£ Th·ª•y H√≤a", "X√£ VƒÉn M√¥n", "X√£ Y√™n Trung", "X√£ H·ªØu H√≤a", "X√£ Y√™n L∆∞", "X√£ Tam ƒêa", "X√£ Li√™n M·∫°c", "X√£ ƒê√¥ng Ti·∫øn"],
                "Huy·ªán Qu·∫ø V√µ": ["Th·ªã tr·∫•n Ph·ªë M·ªõi", "X√£ Vi·ªát L·∫≠p", "X√£ Nh√¢n Th·∫Øng", "X√£ ƒê·∫°i Xu√¢n", "X√£ Ph∆∞∆°ng Li·ªÖu", "X√£ Nam S∆°n", "X√£ D≈©ng Li·ªát", "X√£ Chi LƒÉng", "X√£ Ph√π L∆∞u T·∫ø", "X√£ B·ªìng Lai"]
            },
            "B√¨nh D∆∞∆°ng": {
                "TP. Th·ªß D·∫ßu M·ªôt": ["Ph∆∞·ªùng Ph√∫ C∆∞·ªùng", "Ph∆∞·ªùng Ph√∫ H√≤a", "Ph∆∞·ªùng Ph√∫ Th·ªç", "Ph∆∞·ªùng Ch√°nh Nghƒ©a", "Ph∆∞·ªùng ƒê·ªãnh H√≤a", "Ph∆∞·ªùng Hi·ªáp An", "Ph∆∞·ªùng Hi·ªáp Th√†nh", "Ph∆∞·ªùng Ph√∫ L·ª£i", "Ph∆∞·ªùng Ph√∫ T√¢n", "Ph∆∞·ªùng T∆∞∆°ng B√¨nh Hi·ªáp", "Ph∆∞·ªùng T√¢n An", "Ph∆∞·ªùng L√°i Thi√™u"],
                "TP. Dƒ© An": ["Ph∆∞·ªùng Dƒ© An", "Ph∆∞·ªùng ƒê√¥ng H√≤a", "Ph∆∞·ªùng An B√¨nh", "Ph∆∞·ªùng T√¢n B√¨nh", "Ph∆∞·ªùng T√¢n ƒê√¥ng Hi·ªáp", "Ph∆∞·ªùng B√¨nh An", "Ph∆∞·ªùng B√¨nh Th·∫Øng"],
                "TP. Thu·∫≠n An": ["Ph∆∞·ªùng An Th·∫°nh", "Ph∆∞·ªùng L√°i Thi√™u", "Ph∆∞·ªùng B√¨nh Chu·∫©n", "Ph∆∞·ªùng Thu·∫≠n Giao", "Ph∆∞·ªùng An Ph√∫", "Ph∆∞·ªùng H∆∞ng ƒê·ªãnh", "Ph∆∞·ªùng An S∆°n"],
                "Huy·ªán B√†u B√†ng": ["Th·ªã tr·∫•n Lai Uy√™n", "X√£ T√¢n H∆∞ng", "X√£ Long Nguy√™n", "X√£ Tr·ª´ VƒÉn Th·ªë", "X√£ Lai H∆∞ng", "X√£ T√¢n B√¨nh", "X√£ Uy√™n H∆∞ng"]
            },
            "ƒê·ªìng Nai": {
                "TP. Bi√™n H√≤a": ["Ph∆∞·ªùng Quy·∫øt Th·∫Øng", "Ph∆∞·ªùng Th·ªëng Nh·∫•t", "Ph∆∞·ªùng D√¢n Ch·ªß", "Ph∆∞·ªùng T√¢n Mai", "Ph∆∞·ªùng T√¢n Ti·∫øn", "Ph∆∞·ªùng B·ª≠u Long", "Ph∆∞·ªùng An B√¨nh", "Ph∆∞·ªùng B√¨nh ƒêa", "Ph∆∞·ªùng Long B√¨nh T√¢n", "Ph∆∞·ªùng Tam H√≤a", "Ph∆∞·ªùng Tam Hi·ªáp", "Ph∆∞·ªùng T√¢n Phong", "Ph∆∞·ªùng H√≥a An", "Ph∆∞·ªùng T√¢n H√≤a", "Ph∆∞·ªùng Tr·∫£ng D√†i"],
                "TP. Long Kh√°nh": ["Ph∆∞·ªùng Xu√¢n An", "Ph∆∞·ªùng Xu√¢n B√¨nh", "Ph∆∞·ªùng Xu√¢n Ho√†", "Ph∆∞·ªùng Xu√¢n L·∫≠p", "Ph∆∞·ªùng Xu√¢n T√¢n", "Ph∆∞·ªùng Xu√¢n Th·∫°nh", "Ph∆∞·ªùng B√¨nh Minh", "Ph∆∞·ªùng B√¨nh H√≤a"],
                "Huy·ªán Nh∆°n Tr·∫°ch": ["Th·ªã tr·∫•n Hi·ªáp Ph∆∞·ªõc", "X√£ Ph∆∞·ªõc An", "X√£ Long Tho", "X√£ ƒê·∫°i Ph∆∞·ªõc", "X√£ Ph∆∞·ªõc Thi·ªÅn", "X√£ Nh∆°n Tr·∫°ch", "X√£ Ph∆∞·ªõc Kh√°nh", "X√£ Vƒ©nh Thanh"],
                "Huy·ªán T√¢n Ph√∫": ["Th·ªã tr·∫•n T√¢n Ph√∫", "X√£ Dak Lua", "X√£ Nam C√°t Ti·∫øn", "X√£ N√∫i T∆∞·ª£ng", "X√£ T√† L√†i", "X√£ Tr√† C·ªï", "X√£ Ph√∫ S∆°n", "X√£ Ph√∫ Xu√¢n", "X√£ Ph√∫ Ng·ªçc"]
            },
            "Ngh·ªá An": {
                "TP. Vinh": ["Ph∆∞·ªùng B·∫øn Th·ªßy", "Ph∆∞·ªùng ƒê√¥ng Vƒ©nh", "Ph∆∞·ªùng H√† Huy T·∫≠p", "Ph∆∞·ªùng H·ªìng S∆°n", "Ph∆∞·ªùng L√™ L·ª£i", "Ph∆∞·ªùng Qu√°n B√†u", "Ph∆∞·ªùng Quang Trung", "Ph∆∞·ªùng Tr∆∞·ªùng Thi", "Ph∆∞·ªùng Trung ƒê√¥", "Ph∆∞·ªùng Vinh T√¢n", "Ph∆∞·ªùng C·ª≠a Nam", "Ph∆∞·ªùng ƒê·ªôi Cung", "Ph∆∞·ªùng H∆∞ng B√¨nh", "Ph∆∞·ªùng H∆∞ng D≈©ng", "Ph∆∞·ªùng H∆∞ng Ph√∫c"],
                "Th·ªã x√£ C·ª≠a L√≤": ["Ph∆∞·ªùng Nghi Thu·ª∑", "Ph∆∞·ªùng Nghi H√≤a", "Ph∆∞·ªùng Nghi H·∫£i", "Ph∆∞·ªùng Nghi H∆∞∆°ng"],
                "Huy·ªán Nghi L·ªôc": ["Th·ªã tr·∫•n Qu√°n H√†nh", "X√£ Nghi Trung", "X√£ Nghi Hoa", "X√£ Nghi H∆∞ng", "X√£ Nghi Long", "X√£ Nghi Xu√¢n", "X√£ Nghi Th√°i", "X√£ Nghi L√¢m", "X√£ Nghi Ki·ªÅu", "X√£ Nghi M·ªπ", "X√£ Nghi Phong", "X√£ Nghi Thu·∫≠n", "X√£ Nghi Quang"],
                "Huy·ªán Nam ƒê√†n": ["Th·ªã tr·∫•n Nam ƒê√†n", "X√£ Kh√°nh S∆°n", "X√£ Nam Anh", "X√£ Nam Xu√¢n", "X√£ Nam Thanh", "X√£ Nam L·ªôc", "X√£ H·ªìng Long", "X√£ Xu√¢n H√≤a", "X√£ Kim Li√™n", "X√£ Trung Ph√∫c C∆∞·ªùng"]
            },
            "Thanh H√≥a": {
                "TP. Thanh H√≥a": ["Ph∆∞·ªùng Ba ƒê√¨nh", "Ph∆∞·ªùng Lam S∆°n", "Ph∆∞·ªùng T√¢n S∆°n", "Ph∆∞·ªùng ƒêi·ªán Bi√™n", "Ph∆∞·ªùng Qu·∫£ng Th·∫Øng", "Ph∆∞·ªùng Qu·∫£ng H∆∞ng", "Ph∆∞·ªùng Qu·∫£ng Th√†nh", "Ph∆∞·ªùng ƒê√¥ng Th·ªç", "Ph∆∞·ªùng ƒê√¥ng V·ªá", "Ph∆∞·ªùng ƒê√¥ng S∆°n", "Ph∆∞·ªùng ƒê√¥ng H·∫£i", "Ph∆∞·ªùng ƒê√¥ng C∆∞∆°ng", "Ph∆∞·ªùng T√¢n Th√†nh", "Ph∆∞·ªùng Ph√∫ S∆°n", "Ph∆∞·ªùng H√†m R·ªìng"],
                "Th·ªã x√£ B·ªâm S∆°n": ["Ph∆∞·ªùng B·ªâm S∆°n", "Ph∆∞·ªùng Ba ƒê√¨nh", "Ph∆∞·ªùng Lam S∆°n", "Ph∆∞·ªùng T√¢n B√¨nh", "Ph∆∞·ªùng VƒÉn Tr√≠", "Ph∆∞·ªùng ƒê√¥ng S∆°n"],
                "Huy·ªán ƒê√¥ng S∆°n": ["Th·ªã tr·∫•n R·ª´ng Th√¥ng", "X√£ ƒê√¥ng Ho√†ng", "X√£ ƒê√¥ng Ninh", "X√£ ƒê√¥ng H√≤a", "X√£ ƒê√¥ng Y√™n", "X√£ ƒê√¥ng Minh", "X√£ ƒê√¥ng Th√†nh", "X√£ ƒê√¥ng VƒÉn", "X√£ ƒê√¥ng Kh√™", "X√£ ƒê√¥ng Lƒ©nh", "X√£ ƒê√¥ng Th·ªç", "X√£ ƒê√¥ng Ph√∫", "X√£ ƒê√¥ng S∆°n"],
                "Huy·ªán Ho·∫±ng H√≥a": ["Th·ªã tr·∫•n B√∫t S∆°n", "X√£ Ho·∫±ng Giang", "X√£ Ho·∫±ng Xu√¢n", "X√£ Ho·∫±ng Ph∆∞·ª£ng", "X√£ Ho·∫±ng Ph√∫", "X√£ Ho·∫±ng Minh", "X√£ Ho·∫±ng Ti·∫øn", "X√£ Ho·∫±ng H√†", "X√£ Ho·∫±ng ƒê·∫°t", "X√£ Ho·∫±ng ƒê·ªìng", "X√£ Ho·∫±ng Th·∫Øng", "X√£ Ho·∫±ng H·ª£p"]
            },
            "H√† Tƒ©nh": {
                "TP. H√† Tƒ©nh": ["Ph∆∞·ªùng B·∫Øc H√†", "Ph∆∞·ªùng Nam H√†", "Ph∆∞·ªùng Tr·∫ßn Ph√∫", "Ph∆∞·ªùng ƒê·∫°i N√†i", "Ph∆∞·ªùng Th·∫°ch Qu√Ω", "Ph∆∞·ªùng VƒÉn Y√™n", "Ph∆∞·ªùng Nguy·ªÖn Du", "Ph∆∞·ªùng Th·∫°ch Linh", "Ph∆∞·ªùng Th·∫°ch H·∫°"],
                "Th·ªã x√£ H·ªìng Lƒ©nh": ["Ph∆∞·ªùng B·∫Øc H·ªìng", "Ph∆∞·ªùng Nam H·ªìng", "Ph∆∞·ªùng ƒê·∫≠u Li√™u", "Ph∆∞·ªùng ƒê·ª©c Thu·∫≠n", "X√£ Thu·∫≠n L·ªôc"],
                "Huy·ªán Can L·ªôc": ["Th·ªã tr·∫•n Ngh√®n", "X√£ Thi√™n L·ªôc", "X√£ Kh√°nh Vƒ©nh Y√™n", "X√£ Thanh L·ªôc", "X√£ V∆∞·ª£ng L·ªôc", "X√£ ƒê·ªìng L·ªôc", "X√£ Gia Hanh"],
                "Huy·ªán ƒê·ª©c Th·ªç": ["Th·ªã tr·∫•n ƒê·ª©c Th·ªç", "X√£ ƒê·ª©c L·∫°ng", "X√£ ƒê·ª©c ƒê·ªìng", "X√£ ƒê·ª©c H√≤a", "X√£ ƒê·ª©c Thanh", "X√£ ƒê·ª©c Y√™n", "X√£ ƒê·ª©c L√¢m", "X√£ ƒê·ª©c Long"],
                "Huy·ªán Nghi Xu√¢n": ["Th·ªã tr·∫•n Xu√¢n An", "X√£ Xu√¢n H·∫£i", "X√£ Xu√¢n Giang", "X√£ Xu√¢n H·ªìng", "X√£ Xu√¢n Lam", "X√£ Xu√¢n Li√™n", "X√£ Xu√¢n M·ªπ", "X√£ Xu√¢n Ph·ªï", "X√£ Xu√¢n Quang"],
                "Huy·ªán K·ª≥ Anh": ["Th·ªã tr·∫•n K·ª≥ Anh", "X√£ K·ª≥ L·ª£i", "X√£ K·ª≥ Th·ªãnh", "X√£ K·ª≥ Trinh", "X√£ K·ª≥ Ph∆∞∆°ng", "X√£ K·ª≥ Nam", "X√£ K·ª≥ Xu√¢n", "X√£ K·ª≥ H·∫£i"],
                "Huy·ªán V≈© Quang": ["Th·ªã tr·∫•n V≈© Quang", "X√£ ƒê·ª©c B·ªìng", "X√£ ƒê·ª©c Giang", "X√£ ƒê·ª©c Lƒ©nh", "X√£ ƒê·ª©c H∆∞∆°ng", "X√£ ƒê·ª©c Li√™n", "X√£ ƒê·ª©c L·∫°c"],
                "Huy·ªán H∆∞∆°ng Kh√™": ["Th·ªã tr·∫•n H∆∞∆°ng Kh√™", "X√£ H∆∞∆°ng B√¨nh", "X√£ H∆∞∆°ng Th·ªßy", "X√£ H∆∞∆°ng Tr√†", "X√£ H∆∞∆°ng Xu√¢n", "X√£ Ph√∫ Gia", "X√£ Ph√∫ Phong", "X√£ Ph√∫ L·ªôc"],
                "Huy·ªán C·∫©m Xuy√™n": ["Th·ªã tr·∫•n C·∫©m Xuy√™n", "X√£ C·∫©m B√¨nh", "X√£ C·∫©m Du·ªá", "X√£ C·∫©m D∆∞∆°ng", "X√£ C·∫©m H√≤a", "X√£ C·∫©m Lƒ©nh", "X√£ C·∫©m M·ªπ", "X√£ C·∫©m Nh∆∞·ª£ng", "X√£ C·∫©m Quan"],
                "Huy·ªán Th·∫°ch H√†": ["Th·ªã tr·∫•n Th·∫°ch H√†", "X√£ Th·∫°ch ƒê√†i", "X√£ Th·∫°ch Long", "X√£ Th·∫°ch M·ªπ", "X√£ Th·∫°ch Ng·ªçc", "X√£ Th·∫°ch T√¢n", "X√£ Th·∫°ch Vƒ©nh", "X√£ Th·∫°ch Xu√¢n"],
                "Huy·ªán L·ªôc H√†": ["Th·ªã tr·∫•n L·ªôc H√†", "X√£ Th·∫°ch B·∫±ng", "X√£ Th·∫°ch Ch√¢u", "X√£ Th·∫°ch Kim", "X√£ Th·∫°ch M·ªπ", "X√£ Th·∫°ch H·∫£i", "X√£ Th·∫°ch Li√™n", "X√£ Th·∫°ch M·ªπ"],
                "Huy·ªán H∆∞∆°ng S∆°n": ["Th·ªã tr·∫•n Ph·ªë Ch√¢u", "X√£ S∆°n B√¨nh", "X√£ S∆°n B·∫±ng", "X√£ S∆°n Giang", "X√£ S∆°n H√†", "X√£ S∆°n H·ªìng", "X√£ S∆°n Kim 1", "X√£ S∆°n Kim 2"],
                "Huy·ªán Nghi Xu√¢n": ["Th·ªã tr·∫•n Xu√¢n An", "X√£ Xu√¢n H·∫£i", "X√£ Xu√¢n Giang", "X√£ Xu√¢n H·ªìng", "X√£ Xu√¢n Lam", "X√£ Xu√¢n Li√™n", "X√£ Xu√¢n M·ªπ", "X√£ Xu√¢n Ph·ªï", "X√£ Xu√¢n Quang"],
                "Huy·ªán K·ª≥ Anh": ["Th·ªã tr·∫•n K·ª≥ Anh", "X√£ K·ª≥ L·ª£i", "X√£ K·ª≥ Th·ªãnh", "X√£ K·ª≥ Trinh", "X√£ K·ª≥ Ph∆∞∆°ng", "X√£ K·ª≥ Nam", "X√£ K·ª≥ Xu√¢n", "X√£ K·ª≥ H·∫£i"]
            },
            "H√† Nam": {
                "TP. Ph·ªß L√Ω": ["Ph∆∞·ªùng Minh Khai", "Ph∆∞·ªùng L√™ H·ªìng Phong", "Ph∆∞·ªùng Tr·∫ßn H∆∞ng ƒê·∫°o", "Ph∆∞·ªùng Thanh Ch√¢u", "Ph∆∞·ªùng Li√™m Ch√≠nh", "Ph∆∞·ªùng Ch√¢u S∆°n", "Ph∆∞·ªùng Lam H·∫°"],
                "Huy·ªán Duy Ti√™n": ["Th·ªã tr·∫•n ƒê·ªìng VƒÉn", "X√£ Y√™n B·∫Øc", "X√£ Y√™n Nam", "X√£ Y√™n B·∫Øc", "X√£ Y√™n Th·ªç", "X√£ Y√™n Trung"]
            },
            "H√† Giang": {
                "TP. H√† Giang": ["Ph∆∞·ªùng Tr·∫ßn Ph√∫", "Ph∆∞·ªùng Nguy·ªÖn Tr√£i", "Ph∆∞·ªùng Quang Trung", "Ph∆∞·ªùng Minh Khai", "Ph∆∞·ªùng Ng·ªçc H√†", "Ph∆∞·ªùng Ph∆∞∆°ng ƒê·ªô", "Ph∆∞·ªùng T√¢n Quang", "Ph∆∞·ªùng Ph∆∞∆°ng Thi·ªán"],
                "Huy·ªán V·ªã Xuy√™n": ["Th·ªã tr·∫•n V·ªã Xuy√™n", "X√£ Ph√∫ Linh", "X√£ Ph√∫ Linh", "X√£ Ph√∫ Linh", "X√£ Ph√∫ Linh"]
            }
        };

        // Enhanced autocomplete functionality for location inputs
        function initializeLocationAutocomplete() {
            const provinceInput = document.getElementById('province');
            const districtInput = document.getElementById('district');
            const wardInput = document.getElementById('ward');
            
            if (provinceInput) setupAutocomplete(provinceInput, Object.keys(locationData), handleProvinceSelection);
            if (districtInput) setupAutocomplete(districtInput, [], handleDistrictSelection);
            if (wardInput) setupAutocomplete(wardInput, [], handleWardSelection);
        }

        function setupAutocomplete(inputElement, dataSource, onSelection) {
            const container = inputElement.parentElement;
            const dropdown = container.querySelector('.autocomplete-dropdown');
            let currentHighlight = -1;
            let filteredData = [];

            inputElement.addEventListener('input', function() {
                const value = this.value.trim();
                currentHighlight = -1;
                
                if (value.length === 0) {
                    hideDropdown();
                    return;
                }

                filteredData = dataSource.filter(item => 
                    item.toLowerCase().includes(value.toLowerCase())
                );

                showDropdown(filteredData, dropdown, inputElement, onSelection);
            });

            inputElement.addEventListener('keydown', function(e) {
                if (!dropdown.style.display || dropdown.style.display === 'none') return;

                switch(e.key) {
                    case 'ArrowDown':
                        e.preventDefault();
                        currentHighlight = Math.min(currentHighlight + 1, filteredData.length - 1);
                        updateHighlight();
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        currentHighlight = Math.max(currentHighlight - 1, -1);
                        updateHighlight();
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (currentHighlight >= 0 && filteredData[currentHighlight]) {
                            selectItem(filteredData[currentHighlight], inputElement, onSelection);
                            hideDropdown();
                        }
                        break;
                    case 'Escape':
                        hideDropdown();
                        break;
                }
            });

            inputElement.addEventListener('blur', function() {
                // Delay hiding to allow click events
                setTimeout(hideDropdown, 150);
            });

            function updateHighlight() {
                const items = dropdown.querySelectorAll('.autocomplete-item:not(.no-results)');
                items.forEach((item, index) => {
                    item.classList.toggle('highlighted', index === currentHighlight);
                });
            }

            function hideDropdown() {
                dropdown.style.display = 'none';
                dropdown.innerHTML = '';
            }
        }

        function showDropdown(data, dropdown, inputElement, onSelection) {
            dropdown.innerHTML = '';
            
            if (data.length === 0) {
                dropdown.innerHTML = '<div class="autocomplete-item no-results">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</div>';
            } else {
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'autocomplete-item';
                    div.textContent = item;
                    div.addEventListener('click', function() {
                        selectItem(item, inputElement, onSelection);
                        dropdown.style.display = 'none';
                    });
                    dropdown.appendChild(div);
                });
            }
            
            dropdown.style.display = 'block';
        }

        function selectItem(item, inputElement, onSelection) {
            inputElement.value = item;
            if (onSelection) onSelection(item);
        }

        function handleProvinceSelection(province) {
            const districtInput = document.getElementById('district');
            const wardInput = document.getElementById('ward');
            
            // Clear and enable district input
            districtInput.value = '';
            districtInput.disabled = false;
            districtInput.placeholder = 'Nh·∫≠p t√™n qu·∫≠n/huy·ªán...';
            
            // Clear and disable ward input
            wardInput.value = '';
            wardInput.disabled = true;
            wardInput.placeholder = 'Ch·ªçn qu·∫≠n/huy·ªán tr∆∞·ªõc...';
            
            // Update district autocomplete data
            if (locationData[province]) {
                const districts = Object.keys(locationData[province]);
                setupAutocomplete(districtInput, districts, handleDistrictSelection);
            }
        }

        function handleDistrictSelection(district) {
            const province = document.getElementById('province').value;
            const wardInput = document.getElementById('ward');
            
            // Clear and enable ward input
            wardInput.value = '';
            wardInput.disabled = false;
            wardInput.placeholder = 'Nh·∫≠p t√™n ph∆∞·ªùng/x√£...';
            
            // Update ward autocomplete data
            if (locationData[province] && locationData[province][district]) {
                const wards = locationData[province][district];
                setupAutocomplete(wardInput, wards, handleWardSelection);
            }
        }

        function handleWardSelection(ward) {
            // Optional: Add any logic when ward is selected
            console.log('Ward selected:', ward);
        }

        // Legacy functions for backward compatibility (now using autocomplete)
        function loadDistricts() {
            // This function is now handled by autocomplete
            console.log('loadDistricts called - now using autocomplete');
        }

        function loadWards() {
            // This function is now handled by autocomplete  
            console.log('loadWards called - now using autocomplete');
        }

        function filterAddresses() {
            const searchTerm = document.getElementById('addressSearch').value.toLowerCase();
            
            filteredAddresses = addresses.filter(address => {
                // Filter by search term
                const matchesSearch = searchTerm === '' || 
                    address.recipientName.toLowerCase().includes(searchTerm) ||
                    address.phone.includes(searchTerm) ||
                    address.detailAddress.toLowerCase().includes(searchTerm) ||
                    address.province.toLowerCase().includes(searchTerm) ||
                    address.district.toLowerCase().includes(searchTerm) ||
                    address.ward.toLowerCase().includes(searchTerm);
                
                // Filter by type
                const matchesFilter = currentFilter === 'all' || 
                    (currentFilter === 'default' && address.isDefault) ||
                    (currentFilter !== 'default' && address.type === currentFilter);
                
                return matchesSearch && matchesFilter;
            });
            
            displayAddresses();
        }

        function setAddressFilter(filter) {
            currentFilter = filter;
            
            // Update filter button states
            document.querySelectorAll('.address-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
            
            filterAddresses();
        }

        function loadAddresses() {
            updateAddressStatistics();
            filterAddresses();
        }

        function updateAddressStatistics() {
            const totalAddresses = addresses.length;
            const defaultAddress = addresses.filter(addr => addr.isDefault).length;
            const otherAddresses = totalAddresses - defaultAddress;

            document.getElementById('totalAddresses').textContent = totalAddresses;
            document.getElementById('defaultAddress').textContent = defaultAddress;
            document.getElementById('otherAddresses').textContent = otherAddresses;
        }

        function displayAddresses() {
            const addressList = document.getElementById('addressList');
            if (!addressList) return;

            if (filteredAddresses.length === 0) {
                const isEmpty = addresses.length === 0;
                addressList.innerHTML = `
                    <div class="address-empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <h5>${isEmpty ? 'Ch∆∞a c√≥ ƒë·ªãa ch·ªâ n√†o' : 'Kh√¥ng t√¨m th·∫•y ƒë·ªãa ch·ªâ ph√π h·ª£p'}</h5>
                        <p>${isEmpty ? 'Th√™m ƒë·ªãa ch·ªâ ƒë·∫ßu ti√™n c·ªßa b·∫°n ƒë·ªÉ b·∫Øt ƒë·∫ßu mua s·∫Øm' : 'Th·ª≠ thay ƒë·ªïi t·ª´ kh√≥a t√¨m ki·∫øm ho·∫∑c b·ªô l·ªçc'}</p>
                        ${isEmpty ? `<button class="btn btn-success" onclick="openAddressModal()">
                            <i class="fas fa-plus me-2"></i>Th√™m ƒë·ªãa ch·ªâ m·ªõi
                        </button>` : ''}
                    </div>
                `;
                return;
            }

            const addressCards = filteredAddresses.map(address => `
                <div class="col-md-6 mb-3">
                    <div class="card address-card ${address.isDefault ? 'border-success' : ''}">
                        <div class="card-body">
                            ${address.isDefault ? '<span class="badge bg-success mb-2"><i class="bi bi-star-fill me-1"></i>ƒê·ªãa ch·ªâ m·∫∑c ƒë·ªãnh</span>' : ''}
                            <h6 class="card-title">
                                <i class="bi bi-person-fill me-2"></i>${address.recipientName}
                            </h6>
                            <p class="card-text text-muted mb-2">
                                <i class="bi bi-telephone-fill me-2"></i>${address.phone}
                            </p>
                            <p class="card-text">
                                <i class="bi bi-geo-alt-fill me-2"></i>
                                ${address.detailAddress}
                            </p>
                            <p class="card-text text-muted small">
                                ${address.ward}, ${address.district}, ${address.province}
                            </p>
                            <p class="card-text">
                                <small class="text-muted">
                                    <i class="bi bi-tag-fill me-1"></i>
                                    ${address.type === 'home' ? 'Nh√† ri√™ng' : address.type === 'office' ? 'VƒÉn ph√≤ng' : 'Kh√°c'}
                                </small>
                            </p>
                            <div class="d-flex gap-2 flex-wrap">
                                <button class="btn btn-outline-primary btn-sm" onclick="editAddress('${address.id}')">
                                    <i class="bi bi-pencil-square me-1"></i>S·ª≠a
                                </button>
                                <button class="btn btn-outline-danger btn-sm" onclick="deleteAddress('${address.id}')">
                                    <i class="bi bi-trash3 me-1"></i>X√≥a
                                </button>
                                ${!address.isDefault ? 
                                    `<button class="btn btn-outline-success btn-sm" onclick="setDefaultAddress('${address.id}')">
                                        <i class="bi bi-star me-1"></i>ƒê·∫∑t m·∫∑c ƒë·ªãnh
                                    </button>` : ''
                                }
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            addressList.innerHTML = `
                <div class="row">
                    ${addressCards}
                </div>
            `;
        }

        function openAddressModal(addressId = null) {
            const isEdit = addressId !== null;
            const address = isEdit ? addresses.find(addr => addr.id === addressId) : null;
            
            document.getElementById('addressModalLabel').textContent = isEdit ? 'S·ª≠a ƒë·ªãa ch·ªâ' : 'Th√™m ƒë·ªãa ch·ªâ m·ªõi';
            document.getElementById('addressForm').reset();
            
            // Reset validation states
            const form = document.getElementById('addressForm');
            form.querySelectorAll('.is-invalid, .is-valid').forEach(el => {
                el.classList.remove('is-invalid', 'is-valid');
            });
            
            if (isEdit && address) {
                document.getElementById('recipientName').value = address.recipientName;
                document.getElementById('phone').value = address.phone;
                document.getElementById('province').value = address.province;
                
                // Handle autocomplete for existing address
                if (address.province) {
                    handleProvinceSelection(address.province);
                    setTimeout(() => {
                        document.getElementById('district').value = address.district;
                        if (address.district) {
                            handleDistrictSelection(address.district);
                            setTimeout(() => {
                                document.getElementById('ward').value = address.ward;
                            }, 100);
                        }
                    }, 100);
                }
                
                document.getElementById('detailAddress').value = address.detailAddress;
                document.getElementById('addressType').value = address.type;
                document.getElementById('isDefault').checked = address.isDefault;
            }

            // Store the address ID for editing
            document.getElementById('addressForm').dataset.editId = addressId || '';
            
            const modal = new bootstrap.Modal(document.getElementById('addressModal'));
            modal.show();
        }

        function saveAddress() {
            console.log('saveAddress called');
            const form = document.getElementById('addressForm');
            const formData = new FormData(form);
            const editId = form.dataset.editId;
            
            // Validate form using our custom validation
            if (!validateAddressForm()) {
                console.log('Validation failed');
                return;
            }

            console.log('Validation passed, proceeding to save...');

            const addressData = {
                id: editId || Date.now().toString(),
                recipientName: formData.get('recipientName'),
                phone: formData.get('phone'),
                province: formData.get('province'),
                district: formData.get('district'),
                ward: formData.get('ward'),
                detailAddress: formData.get('detailAddress'),
                type: formData.get('addressType'),
                isDefault: formData.get('isDefault') === 'on',
                createdAt: editId ? addresses.find(addr => addr.id === editId).createdAt : new Date().toISOString()
            };

            console.log('Address data to save:', addressData);
            console.log('Current addresses array before save:', addresses);
            console.log('Edit ID:', editId);

            if (editId) {
                // Edit existing address
                console.log('Editing existing address');
                const index = addresses.findIndex(addr => addr.id === editId);
                if (index !== -1) {
                    addresses[index] = addressData;
                    console.log('Address updated at index:', index);
                } else {
                    console.log('Address not found for editing');
                }
            } else {
                // Add new address
                console.log('Adding new address');
                addresses.push(addressData);
                console.log('New address added, total addresses:', addresses.length);
            }

            // If this address is set as default, remove default from others
            if (addressData.isDefault) {
                addresses.forEach(addr => {
                    if (addr.id !== addressData.id) {
                        addr.isDefault = false;
                    }
                });
            }

            // Save to localStorage
            console.log('Saving to localStorage...');
            localStorage.setItem('userAddresses', JSON.stringify(addresses));
            console.log('Saved to localStorage. Checking saved data...');
            const savedData = localStorage.getItem('userAddresses');
            console.log('Data in localStorage:', savedData);
            
            // Close modal and refresh display
            const modal = bootstrap.Modal.getInstance(document.getElementById('addressModal'));
            modal.hide();
            
            console.log('Modal closed, refreshing display...');
            loadAddresses();
            
            // Show success notification
            showToast(editId ? 'ƒê·ªãa ch·ªâ ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!' : 'ƒê·ªãa ch·ªâ m·ªõi ƒë√£ ƒë∆∞·ª£c th√™m th√†nh c√¥ng!', 'success');
        }

        function editAddress(addressId) {
            openAddressModal(addressId);
        }

        function deleteAddress(addressId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ƒë·ªãa ch·ªâ n√†y?')) {
                addresses = addresses.filter(addr => addr.id !== addressId);
                localStorage.setItem('userAddresses', JSON.stringify(addresses));
                loadAddresses();
            }
        }

        function setDefaultAddress(addressId) {
            // Remove default from all addresses
            addresses.forEach(addr => {
                addr.isDefault = addr.id === addressId;
            });
            
            localStorage.setItem('userAddresses', JSON.stringify(addresses));
            loadAddresses();
        }

        // Initialize address search and filter events
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize location autocomplete
            initializeLocationAutocomplete();
            
            // Search functionality
            const searchInput = document.getElementById('addressSearch');
            if (searchInput) {
                searchInput.addEventListener('input', filterAddresses);
            }

            // Filter functionality
            document.querySelectorAll('.address-filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    setAddressFilter(this.getAttribute('data-filter'));
                });
            });

            // Real-time validation removal and phone number formatting
            const formInputs = ['recipientName', 'phone', 'province', 'district', 'ward', 'detailAddress'];
            formInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    if (inputId === 'phone') {
                        // Special handling for phone number
                        input.addEventListener('input', function() {
                            // Remove non-digit characters
                            let value = this.value.replace(/\D/g, '');
                            
                            // Limit to 11 digits
                            if (value.length > 11) {
                                value = value.slice(0, 11);
                            }
                            
                            // Update the input value
                            this.value = value;
                            
                            // Remove validation classes first
                            this.classList.remove('is-invalid', 'is-valid');
                            
                            // Add validation feedback
                            if (value.length >= 10 && value.length <= 11) {
                                this.classList.add('is-valid');
                            } else if (value.length > 0) {
                                this.classList.add('is-invalid');
                            }
                        });
                        
                        input.addEventListener('keypress', function(e) {
                            // Only allow digits
                            if (!/[0-9]/.test(e.key) && !['Backspace', 'Delete', 'Tab', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                                e.preventDefault();
                            }
                        });
                    } else {
                        // Regular handling for other inputs
                        input.addEventListener('input', function() {
                            this.classList.remove('is-invalid');
                            if (this.value.trim()) {
                                this.classList.add('is-valid');
                            }
                        });
                    }
                    
                    input.addEventListener('change', function() {
                        this.classList.remove('is-invalid');
                        if (this.value.trim()) {
                            this.classList.add('is-valid');
                        }
                    });
                }
            });

            // Setup password strength checking
            const registerPassword = document.getElementById('registerPassword');
            const newPassword = document.getElementById('newPassword');
            
            if (registerPassword) {
                registerPassword.addEventListener('input', () => {
                    checkPasswordStrength(registerPassword.value, 'strengthBar', 'strengthText');
                });
            }
            
            if (newPassword) {
                newPassword.addEventListener('input', () => {
                    checkPasswordStrength(newPassword.value, 'resetStrengthBar', 'resetStrengthText');
                });
            }

            // Setup change password strength checking
            const changePasswordInput = document.getElementById('newPasswordChange');
            if (changePasswordInput) {
                changePasswordInput.addEventListener('input', () => {
                    checkPasswordStrength(changePasswordInput.value, 'changeStrengthBar', 'changeStrengthText');
                });
            }
        });

        // Logout function
        function logout() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
                showSection('loginSection');
                // Clear any saved data if needed
                localStorage.removeItem('userSession');
            }
        }

        // Form validation helpers
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const re = /^[0-9]{10,11}$/;
            return re.test(phone.replace(/\s/g, ''));
        }

        // Enhanced form validation for address
        function validateAddressForm() {
            console.log('validateAddressForm called');
            const form = document.getElementById('addressForm');
            const recipientName = document.getElementById('recipientName').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const province = document.getElementById('province').value;
            const district = document.getElementById('district').value;
            const ward = document.getElementById('ward').value;
            const detailAddress = document.getElementById('detailAddress').value.trim();

            console.log('Form data:', { recipientName, phone, province, district, ward, detailAddress });

            // Reset validation states
            form.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));

            let isValid = true;

            if (!recipientName || recipientName.length < 2) {
                document.getElementById('recipientName').classList.add('is-invalid');
                isValid = false;
            }

            if (!validatePhone(phone)) {
                document.getElementById('phone').classList.add('is-invalid');
                isValid = false;
            }

            if (!province) {
                document.getElementById('province').classList.add('is-invalid');
                isValid = false;
            }

            if (!district) {
                document.getElementById('district').classList.add('is-invalid');
                isValid = false;
            }

            if (!ward) {
                document.getElementById('ward').classList.add('is-invalid');
                isValid = false;
            }

            // Gi·∫£m y√™u c·∫ßu t·ª´ 10 xu·ªëng 5 k√Ω t·ª± cho ƒë·ªãa ch·ªâ chi ti·∫øt
            if (!detailAddress || detailAddress.length < 5) {
                document.getElementById('detailAddress').classList.add('is-invalid');
                isValid = false;
            }

            console.log('Validation result:', isValid);
            return isValid;
        }

        // Profile management functions
        function loadProfile() {
            const savedProfile = JSON.parse(localStorage.getItem('userProfile')) || {};
            
            document.getElementById('editName').value = savedProfile.name || '';
            document.getElementById('editEmail').value = savedProfile.email || '';
            document.getElementById('editPhone').value = savedProfile.phone || '';
            document.getElementById('editBirthday').value = savedProfile.birthday || '';
            
            if (savedProfile.gender) {
                document.getElementById('gender' + savedProfile.gender.charAt(0).toUpperCase() + savedProfile.gender.slice(1)).checked = true;
            }
            
            document.getElementById('emailNotifications').checked = savedProfile.emailNotifications !== false;
            
            // Update display
            document.getElementById('profileName').textContent = savedProfile.name || 'Ng∆∞·ªùi d√πng';
            document.getElementById('profileEmail').textContent = savedProfile.email || 'user@example.com';
        }

        function resetProfileForm() {
            loadProfile();
        }

        function preventEnterSubmit(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                return false;
            }
        }

        // Form submission handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Profile form
            const profileForm = document.getElementById('profileForm');
            if (profileForm) {
                profileForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const profileData = {
                        name: document.getElementById('editName').value,
                        email: document.getElementById('editEmail').value,
                        phone: document.getElementById('editPhone').value,
                        birthday: document.getElementById('editBirthday').value,
                        gender: document.querySelector('input[name="gender"]:checked')?.value || '',
                        emailNotifications: document.getElementById('emailNotifications').checked
                    };
                    
                    localStorage.setItem('userProfile', JSON.stringify(profileData));
                    loadProfile();
                    
                    // Show success message
                    const alert = document.createElement('div');
                    alert.className = 'alert alert-success alert-dismissible fade show mt-2';
                    alert.innerHTML = `
                        <i class="bi bi-check-circle me-2"></i>Th√¥ng tin ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    `;
                    profileForm.insertAdjacentElement('afterend', alert);
                    
                    setTimeout(() => {
                        alert.remove();
                    }, 3000);
                });
            }

            // Change password form
            const changePasswordForm = document.getElementById('changePasswordForm');
            if (changePasswordForm) {
                changePasswordForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const currentPassword = document.getElementById('currentPassword').value;
                    const newPassword = document.getElementById('newPasswordChange').value;
                    const confirmPassword = document.getElementById('confirmNewPasswordChange').value;
                    
                    // Basic validation
                    if (newPassword !== confirmPassword) {
                        showAlert(changePasswordForm, 'M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!', 'danger');
                        return;
                    }
                    
                    if (newPassword.length < 8) {
                        showAlert(changePasswordForm, 'M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±!', 'danger');
                        return;
                    }
                    
                    // Simulate password change (in real app, verify current password)
                    localStorage.setItem('userPassword', newPassword);
                    
                    // Clear form
                    changePasswordForm.reset();
                    
                    showAlert(changePasswordForm, 'M·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c thay ƒë·ªïi th√†nh c√¥ng!', 'success');
                });
            }

            // Load profile on dashboard load
            loadProfile();
        });

        function showAlert(element, message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} alert-dismissible fade show mt-2`;
            alert.innerHTML = `
                <i class="bi bi-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} me-2"></i>${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            element.insertAdjacentElement('afterend', alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }
    </script>
</body>
</html>
